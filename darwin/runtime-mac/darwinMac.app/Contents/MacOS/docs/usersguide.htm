<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>DARWIN User's Guide</title>
  <link rel="stylesheet" type="text/css" href="usersguide.htg/darwin.css">
</head>

<body bgcolor="#39597D" text="#000000" link="#C6CFD9" vlink="#C6CFD9" alink="#C6CFD9">
<a name="toc">&nbsp;</a>

<table border=0 width="100%" cellspacing=0 cellpadding=2 bgcolor="#000000">
      <tr>
        <td width="100%" bgcolor="#000000">
          <table border=0 width="100%" bgcolor="#7E93AA" cellspacing=0 cellpadding=2>
            <tr>
              <td class="title" width=1 nowrap bgcolor="#000000">
                &nbsp;DARWIN:&nbsp;&nbsp;
              </td>
              <td class="menu" width="100%" nowrap>
                &nbsp;
                <a href="http://darwin.eckerd.edu/?page=home.html" class="nav">DARWIN Official Website</a> |
                <a href="http://darwin-ec.googlecode.com/" class="nav">DARWIN GoogleCode Repository</a>                
			</td>
			<td class="menu" width="201" nowrap>
                <a href="http://www.eckerd.edu/"><img src="usersguide.htg/eckerd.gif" height="40" width="201" border="0" alt="Eckerd College: Department of Computer Science"></a>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>

    <br/>

          <table border="0" width="100%" cellpadding=0 cellspacing=0>
            <tr>
              <td valign="top" align="right">
                <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
                  <tr>
                    <td class="title" width="100%" valign=middle align=center>
                    T<br/>
                    a<br/>
                    b<br/>
                    l<br/>
                    e<br/>
                    &nbsp;<br/>
                    o<br/>
                    f<br/>
                    &nbsp;<br/>
                    C<br/>
                    o<br/>
                    n<br/>
                    t<br/>
                    e<br/>
                    n<br/>
                    t<br/>
                    s<br/>
                    </td> 
                  </tr>
                </table>
              </td>
              <td width="100%" bgcolor="#000000">
                <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
                  <tr>
                    <td valign="top">
                      <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
                        <tr>
                          <td width="100%" valign=top align=left>
<p><u><strong><img style="width: 200px; height: 367px; float: right;" alt="" src="usersguide.htg/darwin_splash.jpg"></strong></u>
</p>

<h1 align="center">Digital Analysis and Recognition of Whale Images on a Network (DARWIN)</h1>
<h2 align="center">User's Guide (version 2.0)</h2>



<!----Table of contents----------------------------------------------------------------------------------->

<h2>Table of Contents</h2>
</p>

<ul>

<li><a href="#overview">Overview</a></li>
<LI><A HREF="#concepts">Concepts and Locations</A>
<UL>
	<LI><A HREF="#concepts_areas_etc">Survey Areas, Catalogs, Databases and Fins</A>
	<LI><A HREF="#concepts_folders">The DARWIN Folder Structure</A>
	<LI><A HREF="#concepts_emergency">Automatic Backups for EMERGENCY RESTORE</A>
</UL>
<li><a href="#install">Installation/Upgrade</a></li>
<ul>
  <li><a href="#install_requirements">System Requirements</a>
  <li><a href="#install_or_upgrade">Install or Upgrade?</a>
  <li><a href="#install_where">Where to install.</a>
  <li><a href="#install_catalog">Converting an existing Catalog to new SQL format.</a>
</ul>
<li><a href="#steps">Step by Step Processes</a>
<ul>
  <li><a href="#mainwin_scheme">Creating a catalog scheme</a></li>
  <li><a href="#mainwin_creating">Creating a database</a></li>
  <li><a href="#mainwin_viewing">Viewing images or sighting data from the database</a></li>
  <li><a href="#mainwin_exportSighting"> Exporting sighting data from the catalog</a></li>
  <li><a href="#tracewin_tracing">Tracing the outline of a dorsal fin image</a></li>
  <li><a href="#tracewin_adding">Adding a dorsal fin to the database</a></li>
  <li><a href="#tracewin_comparing">Comparing an unknown dorsal fin against images in the database</a></li>
  <li><a href="#tracewin_queue">Creating a queue of fins to match against the database</a></li>
  <li><a href="#view_finz">Using DARWIN as a stand-alone <B><I>Fin</I></B> (image & traced outline) Viewer</a>
  <li><a href="#backup_restore">Catalog Backup and Restore</a>
  <li><a href="#export_import">Catalog Export and Import</a>
  <li><a href="#export_import_finz">Exporting and Importing individual or multiple traced FINs</a>
</ul>
  <li><a href="#hints">Hints for Effective Usage</a>
<ul>
  <li><a href="#hint_bad_outline">Do this to help DARWIN produce better outlines?</a>
</ul>
<li><a href="#windows">Windows and Dialogs (in detail)</a>
<ul>
  <li><a href="#mainwin">Main Window</a>
  <li><a href="#tracewin">Trace Window</a>
  <li><a href="#matchwin">Matching Dialog</a>
  <li><a href="#matchreswin">Match Results Window</a></li>
  <li><a href="#matchqueuewin">Matching Queue Dialog</a>
  <li><a href="#modify">Modify Database Window</a>
  <li><A HREF="#viewers">Detail Viewing Dialogs</A>
  <UL>
    <li><a href="#view_image">View Image Dialog</a>
    <li><a href="#view_trace">View Traced Outline Dialog</a>
    <li><a href="#view_aligned_traces">View Aligned Outlines Dialog</a>
  </UL>
  <li><a href="#options">The Options Dialog</a>
  <ul>
    <li><a href="#options_general">General Settings</a></li>
    <li><a href="#options_trace">Trace Settings</a></li>
    <li><a href="#options_fonts">Font Settings</a></li>
  </ul>
</ul>
<li><a href="#details">Behind the Scenes DETAILS</a></li>
<ul>
  <li><a href="#details_finz">The FINZ archive format</a>
  <li><a href="#details_sql">The SQL Catalog format</a>
  <li><a href="#details_config">The "darwin.cfg" file</a>
  <li><a href="#details_auto_backups">DARWIN's automatic backups "darwin.cfg.bak" and "lastLoadOf....db"</a>
  <li><a href="#details_schemes">DEFINED and CURRENT Catalog Category Schemes</a>
</ul>

<li><a href="#faq">Frequently Asked Questions</a>
<ul>
  <li><a href="#what_is_finz">What is the new FINZ archive format?</a>
  <li><a href="#how_convert_catalog">How can I move a catalog from an old installation to a new one?</a>
  <li><a href="#how_recover_catalog">How can I recover from a corrupted catalog?</a>
  <li><a href="#how_report_error">How do I report a problem with DARWIN?</a>
  <li><a href="#whats_in_config">What is in the DARWIN configuration file?</a>
  <li><a href="#whats_auto_saved">What does DARWIN automatically save (in case)?</a>
  <li><a href="#area_or_catalog">Should I create a new Catalog within the current Survey Area or a new Survey Area AND Catalog for a separate study?</a>
  <li><a href="#mod_image_thumb_only">Why does DARWIN save images modified within the TraceWindow
  as thumbnails only ... and how do I recover full-size versions for use outside of DARWIN?</a>

</ul>
<li><a href="#trouble">Troubleshooting</a>

  </li>

</ul>
                                  </td>
                                </tr>
                              </table>
                            </td>
                          </tr>
                        </table>
                      </td>
                    </tr>
                  </table>

<a name="overview"><BR><BR></a>

         <table border="0" width="100%" cellpadding=0 cellspacing=0>
            <tr>
              <td valign="top" align="right">
                <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
                  <tr>
                    <td class="title" width="100%" valign=middle align=center>
                    O<br/>
                    v<br/>
                    e<br/>
                    r<br/>
                    v<br/>
                    i<br/>
                    e<br/>
                    w<br/>
                    </td>
                  </tr>
                </table>
              </td>
              <td width="100%" bgcolor="#000000">
                <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
                  <tr>
                    <td valign="top">
                      <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
                        <tr>
                          <td width="100%" valign=top align=left>

<p>
<table width="100%">

  <tbody>

    <tr>

      <td><h2>Overview</h2></td>

      <td align="right"><a href="#toc">top</a></td>

    </tr>

  </tbody>
</table>

</p>

<p>DARWIN is a software system that allows marine scientists to
maintain collections of digital images and related observational 
data gathered in the
study of various behavioral and ecological patterns. It has been
developed specifically for the study of bottlenose
dolphins, <em>Tursiops truncatus</em>, but has been used successfully
in studies of other related species.
The software provides an intuitive graphical user interface and 
runs on any Windows PC.  Users can create and access multiple
collections of digital dorsal fin images alongside textual 
information describing individual animals and
relevant sighting data. Users can query the system and select
any individual so that all of its related images and data is
displayed by either searching the collection
with the ID of a specific individual or by sorting the entire 
collection with respect to date, location, 
damage category, or other data category and then browsing the displayed 
list of individuals.
New images of individuals can be loaded so that their dorsal fins 
can be automatically or manually traced and used to query the collection
of known individuals in order to identify those individuals who's fins the new image
most closely resembles.

</p>

<p>Darwin currently handles images in JPEG, PNG, BMP, and PNM formats.
The images may be of any size,
and will be appropriately scaled for display. Please note that for the
purposes of automatic
identification, all dorsal fin photographs must be oriented right side
up with the leading edge of
the dorsal fin on the left. (<em>Dolphin swimming toward the left</em>)
This transformation may be
performed in DARWIN after the image is opened. DARWIN also provides
image enhancement options such as contrast enhancement, image brightening
and cropping.  These enhancements may improve the quality of the outline
which is extracted from the image.  The user modified image is used 
for the purposes of outline extraction and matching, and <EM>copies</EM> of
both the modified image and the 
original image are saved whenever a fin is saved or is added to database.
</p>


                                  </td>
                                </tr>
                              </table>
                            </td>
                          </tr>
                        </table>
                      </td>
                    </tr>
                  </table>

<!--
*****************************************************************************************
                           Concepts     CONCEPTS     Concepts 
*****************************************************************************************
-->

 <!-- Help Pane -->
<a name="concepts"><BR><BR></a>

<table border="0" width="100%" cellpadding=0 cellspacing=0>
  <tr>
  <td valign="top" align="right">
  <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
    <tr>
    <td class="title" width="100%" valign=middle align=center>
    C<br/>
    o<br/>
    n<br/>
    c<br/>
    e<br/>
    p<br/>
    t<br/>
    s<br/>
    </td>
    </tr>
  </table>
  </td>
  <td width="100%" bgcolor="#000000">
  <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
    <tr>
    <td valign="top">
    <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
      <tr>
      <td width="100%" valign=top align=left>

<!-- Title and link to top go here -->
<table width="100%">
  <tr>
    <td><H2>Basic Concepts and Locations of Data, Files, Etcetera</H2></td>
    <td align="right"><a href="#toc">top</a></td>
  </tr>
</table>
The DARWIN software has changed significantly over the period of its development.  In particular,
the folder structure, traced fin file format, and underlying database format have changed since 
the initial release of DARWIN 1.0 in December, 2005.  What follows is a brief discussion of the 
current (version 2.0) file and database formats, support for various backup and recovery options, 
and the locations of various configuration and data within the installed DARWIN file (folder) hierarchy.

<!-- body of pane goes here -->
<a name="concepts_areas_etc">
<H2>Survey Areas, Catalogs, Databases and Fins</H2>
</a>

DARWIN supports the organization of images and sighting data in several ways.
Multiple <B><EM>survey areas</EM></B> can be created, and are appropriate
when multiple sets of survey data exist on one computer and the survey
areas are geographically separated.  
The creation of a new survey area is an optional action anytime a new 
<B><EM>catalog</EM></B> is created.  Therefore, any existing survey area 
will contain one or more catalogs.  
<P>
In most essentials a <B><EM>database</EM></B> and a <B><EM>catalog</EM></B> are the same thing 
within DARWIN.  A catalog (database) is a collection of fin images (original and modified)
along with all associated fin outline traces and any related textual sighting data.
However, the images are stored individually in the survey area's 
catalog folder outside of a separate <B>"database file."</B>  This database file is
always named with a "<EM>.db</EM>" file extension, and it contains the
catalog category scheme for the catalog, and, for each catalog fin, the names of its modified
image file, its traced outline, its salient feature points and all of its sighting data.
<P>
A single <B><EM>fin</EM></B> is a combination of two images (original and modified), a trace of the dorsal fin
outline, a set of feature points, and a collection of textual sighting data.  Previous 
DARWIN versions saved fins as a collection of three files in the current survey area's <B><EM>traced fins</EM></B> folder.  The three files were the original image, the modified image, and a
file with a <I>".fin"</I> extension which contained all other information related to the fin (outline
trace, feature points, and sighting data).  Beginning with DARWIN 2.0, individual fins are stored
in files with a <I>".finz"</I> extension, and these files are compressed archives containing within
them both images and all other related information.  This newer format prevents loss of 
images when or if fins are moved manually by the user. DARWIN 2.0 can use fins saved as
older ".fin" files and newer ".finz" files with equal ease.

<a name="concepts_folders">
<H2>DARWIN Folder Structure</H2>
</a>

<PRE>
The created installation folder "darwin-2.0" contains the following ....

    backups        - used in backing up database
    docs           - online user help and other documentation
    licenses-etc   - copies of license and right to use information
    system         - all runtime system files
        bin            - contains executable ("darwin.exe") and GTK+ dlls
        etc            - GTK+ and other
        lib            - GTK+ and other runtime library files
    surveyAreas    - contains all sighting and catalog related data
        sample         - sample survey area (catalog, images, etc)
            catalog       - folder for catalogs
            fin-images    - sample dorsal fin images
            matchQueues   - folder for queued matches 
            matchQResults - folder for saved results of fin matches
            sightings     - folder for sighting information (future use)
            tracedFins    - folder for saved fin tracings
        default        - default survey area (catalogs, sightings, data)
            catalog       - folder for catalogs
            matchQueues   - folder for queued matches 
            matchQResults - folder for saved results of fin matches
            sightings     - folder for sighting information (future use)
            tracedFins    - folder for saved fin tracings
    darwin-2.0-readme.txt - readme file with installation and usage info
</PRE>

<a name="concepts_emergency">
<H2>Automatic Backups for EMERGENCY RESTORE</H2>
</a>

Each time DARWIN runs it creates the following two backups.

<PRE>system/darwin.cfg.bak</PRE>
        This is a copy of the last successfully loaded configuration file.  If the
        program cannot find "system/darwin.cfg" or if it is corrupted, the
        program will automatically restore "system/darwin.cfg" from 
        the "system/darwin.cfg.bak" file.  If this fails a new initial distribution
        version of "system/darwin.cfg" file is created.  You may rebuild the list of
        KNOWN databases, by opening each in turn the next time you run the
        program.  Category naming schemes will have to be manually rebuilt
        and saved.

<PRE>system/lastLoadOf_xxx_yyy.db</PRE>
        This is a copy of the "surveyAreas/xxx/catalog/yyy.db" database file made
        as it was last loaded.  This copy does not contain any changes made 
        to the database while the program was running, nor does it contain the
		actual database images.
<P>
        If the "surveyAreas/xxx/catalog/yyy.db" file is lost or becomes
        corrupted, you may attempt to manually restore the catalog (database) to 
		its last loaded state by manually replacing the 
        "surveyAreas/xxx/catalog/yyy.db" file with a COPY of the
        "system/lastLoadOf_xxx_yyy.db" file.
<P>
        If you have a more recent FULL BACKUP, you can accomplish the same
        thing by using the menu option "File/Restore" in the main window.
        FULL BACKUPS include all associated catalog images as well as the 
        *.db file.

<!-- end of body of pane -->

      </td>
    </tr>
    </table>
    </td>
    </tr>
  </table>
  </td>
  </tr>
</table>
<!-- end of BLANK PANE -->

<!--
*****************************************************************************************
            Install or Upgrade     INSTALL_OR_UPGRADE     Install or Upgrade
*****************************************************************************************
-->
<a name="install">&nbsp;</a>
<table border="0" width="100%" cellpadding=0 cellspacing=0>
  <tr>
  <td valign="top" align="right">
  <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
    <tr>
    <td class="title" width="100%" valign=middle align=center>
    I<br/>
    n<br/>
    s<br/>
    t<br/>
    a<br/>
    l<br/>
    a<br/>
    t<br/>
    i<br/>
    o<br/>
    n<br/>
    </td>
    </tr>
  </table>
  </td>
  <td width="100%" bgcolor="#000000">
  <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
    <tr>
    <td valign="top">
    <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
      <tr>
      <td width="100%" valign=top align=left>

<!-- Title and link to top go here -->
<table width="100%">
  <tr>
    <td><h2>Installation/Upgrading of DARWIN</h2></td>
    <td align="right"><a href="#toc">top</a></td>
  </tr>
</table>

There are several important considerations BEFORE you <A HREF="#install_or_upgrade">install or upgrade</A>
to DARWIN 2.0.

<!-- body of pane goes here -->
<a name="install_requirements">
<H3>System Requirements</H3>
</a>
This software has been designed and tested on both Windows XP and Windows
2000 platforms.  DARWIN 1.98 and later versions are known to run under Windows VISTA.
However, extensive testing has been performed only on Windows XP Professional systems.

<P>
The following recommendations describe several systems capable of running DARWIN 2.0 in
a reasonable fashion. Note that the ideal system will always depend on
several factors including the size of the intended catalog and the manner of intended usage.
At least three usage scenarios are common.

<OL>
	<LI><B><U>Storage Heavy:</U></B> Usage of DARWIN primarily for storage and browsing 
	of many/all images and sighting data related to a particular survey area 
	or an individual study within a survey area.
	<LI><B><U>Identification Heavy:</U></B> Usage of DARWIN primarily for identification of
	individuals (requiring many catalog queries but storing only a small set of 
	set of quality reference images).
	<LI><B><U>Power User:</U></B> Any usage scenario involving LARGE catalogs and/or significant
	use of DARWIN to aid in identifying many individuals.
</OL>

The most computationally intensive tasks performed by DARWIN are its
<A HREF="#fin_trace">Fin Trace</A> and <A HREF="#fin_matching">Fin Matching</A> processes.  These place the 
most significant demands on computing power and benefit from more powerful CPU's and larger main memories.
The catalog size determines most directly the storage demands, and larger catalogs require
larger and faster hard drives.
<P>
DARWIN stores copies of ALL ORIGINAL images and thumbnail copies of all
MODIFIED images (including modification details sufficient to rebuild the modified image
on the fly from the original) in its own folder hierarchy.  This way your original images are
never compromised, and DARWIN saves space by not saving the modified images as complete images.

<P>
Here is a <I>BASIC</I> system allowing DARWIN room for hundreds of images and related 
sighting data, and ensuring reasonable performance in tracing and matching dorsal fin images.
This minimal system would most likely be useful if the survey population is small (less than 200
individuals, and the number sightings / identification queries performed on a regular (daily)
basis is less than 20.  The system described below is used regularly in the development of
DARWIN, but performance would be significantly improved by more main memory, and faster CPU.

<PRE>
<U>BASIC:</U> Minimum System
    CPU: 1.6 Gigahertz (single core) or better
    RAM: 512 Megabytes
    Hard Drive: 40 Gigabytes
    Display: 1024 x 768 with 24-bit color graphics card
    Operating System: Windows VISTA, Windows XP or Windows 2000 
	    (earlier Windows versions may also work but have not been tested)
</PRE>

The following <I>Storage Heavy</I> system allows DARWIN room for tens of thousands of 
images and related sighting data.

<PRE>
<U>Storage Heavy:</U> Minimum System
    CPU: 1.6 Gigahertz (single core) or better
    RAM: 1.0 Gigabytes
    Hard Drive: 80 Gigabytes or larger
    Display: 1024 x 768 with 24-bit color graphics card
    Operating System: Windows VISTA, Windows XP or Windows 2000 
	    (earlier Windows versions may also work but have not been tested)
</PRE>

The following <I>Identification Heavy</I> system allows DARWIN room for hundreds of
reference images and regular use as an aid to identifying individuals.

<PRE>
<U>Identification Heavy:</U> Minimum System
    CPU: 2.0 Gigahertz (dual core) or better
    RAM: 2.0 Gigabytes
    Hard Drive: 40 Gigabytes
    Display: 1024 x 768 with 24-bit color graphics card
    Operating System: Windows VISTA, Windows XP or Windows 2000 
	    (earlier Windows versions may also work but have not been tested)
</PRE>

The following <I>Power User</I> system allows DARWIN room for thousands of images and
related sighting data.

<PRE>
<U>Power User</U>: Minimum System
    CPU: 2.0 Gigahertz (dual core) or faster
    RAM: 64 Megabytes
    Hard Drive: 10 Gigabytes
    Display: 1024 x 768 with 24-bit color graphics card
    Operating System: Windows XP or Windows 2000 (earlier Windows versions 
        may also work but have not been tested)
        Windows VISTA status is unknown.
</PRE>

  <a name="install_or_upgrade"><H2>Install or Upgrade?</H2></a>

Whether to install or upgrade depends on your situation.  If you are a completely new user of DARWIN
then a complete installation is the only way to go.  Simply download and then run the
<B><I>darwin-2.0-setup.exe</I></B>
installer, make your selection of where to install DARWIN (the default location is 
C:\Program&nbsp;Files\darwin-2.0\) and then use the program by selecting it from the START
menu, or by double-clicking on the desktop icon.
<P>
If you are a previous user of DARWIN, and have data already stored in a catalog (or database)
created by a previous DARWIN version, then you can take several courses of action.
<OL>
	<LI>Perform a complete installation as in the previous situation above, making sure
	DARWIN-2.0 is installed in a <B><I>different</I></B> location than your previous DARWIN copy.
	<LI>Perform a complete installation, installing
	DARWIN-2.0 in the <I><B>same</B></I> location as your previous DARWIN copy.
	<LI>Perform an upgrade of your previous version of DARWIN.
</OL>

There are several caveats and cautions for each situation above.
<P>
<B>Complete installation in a new location</B>
<P>
This is the safest way to proceed in ALL cases.  It allows you to control the transfer
of data to the new installation without any compromise of your previous data or
DARWIN installation.  <B><I>If you are currently using DARWIN-1.8 or earlier you absolutely MUST
use this approach</I></B>, as there are several major differences in folder hierarchy and in
database format that make transfer of your data significantly more complex.
<P>
In order to transfer your data, use your previous version of DARWIN
to EXPORT your catalog, and then use DARWIN-2.0 to IMPORT the catalog.  Any catalog
or folder hierarchy conversions that are necessary will occur during this process, and you
will be prompted for any required inputs.  This process creates a completely new
copy of your catalog, and you will still have access to the
old catalog using your old version of DARWIN (just in case).
<P>
<B>Complete installation in the same location OR upgrade of an existing DARWIN version</B>
<P>
The first time you use DARWIN-2.0 after your installation, it will use your old
configuration information and attempt to open your catalog.  If the catalog format
requires changes, you will be prompted to create a NEW catalog
in the DARWIN-2.0 SQL format.  The OLD catalog database file will be renamed.
The catalog images are left unchanged and unmoved.  You will no longer have
access to the OLD database in its unconverted format.

  <a name="install_where"><H3>Where to install.</H3></a>

The default location for installing darwin-2.0 is in the "<B>C:\Program&nbsp;Files\darwin-2.0\</B>" folder,
but you can change this to any desired location during the installation. You may even
install DARWIN on an external hard drive.
<P>
CAUTION: Although DARWIN will allow
you to store fin files and open catalogs in locations other than its own folder structure,
it will only restore and import catalogs within its own folder hierarchy.  You should
<I>NOT</I> plan on moving catalog files to locations outside of the DARWIN folder hierarchy, and
you should <I>NEVER</I> manually modify filenames or move files within a catalog folder. Doing
so risks loss of the catalog integrity and data or images will likely be lost or become orphaned
from the SQL database.

  <a name="install_catalog"><H3>Converting an existing Catalog to new SQL format.</H3></a>

As described above,the safest method is to EXPORT a catalog using your old version of DARWIN,
and then IMPORT the catalog using DARWIN-2.0.  During the IMPORT process, you will be required
to create a NEW <I>Survey Area</I> to ensure that there are no image file name conflicts
between the catalog being imported and any previously existing catalogs.  After the catalog
files have been copied into the appropriate location, DARWIN-2.0 will attempt to open
the catalog.  If the format of the catalog needs to be converted, you will be prompted
and must select whether you desire to make an entire BACKUP of this catalog, or simply rename the
catalog database file before its conversion.  If you just IMPORTED this catalog then choose
NOT to backup the catalog images, and continue.  The database file itself will be renamed
(something like "mydatabase.db.old") and the conversion to an SQL database format will occur.
The catalog will open and you are free to use and modify it after the
conversion.
<P>
NOTE: If you plan to install DARWIN-2.0 in the same location as your old version, 
or simply upgrade DARWIN, you should performed a BACKUP or EXPORT of every catalog 
<I><B>before performing the installation or upgrade.</B></I>  This ensures that your
old catalogs are fully protected and will enable you
to IMPORT your catalogs into DARWIN-2.0.
<P>
If you did not BACKUP or EXPORT your catalogs before removing your old version of DARWIN,
you may always use the "File/Open Database" menu option to access and convert any older catalog.
If you choose to simply OPEN an existing catalog, and DARWIN-2.0 determines that the catalog's
database file format needs to be converted, you will be prompted as in the previous 
situation, the conversion will occur, and the catalog will open for your use.  This
method of accessing an older database does not ensure that a full BACKUP or EXPORT is
performed before conversion, and so it may be much more difficult to recover the OLD
catalog if something goes wrong.

<!-- end of body of pane -->

      </td>
    </tr>
    </table>
    </td>
    </tr>
  </table>
  </td>
  </tr>
</table>
<!-- end of BLANK PANE -->



<!--
*****************************************************************************************
                        MainWindow     MAIN_WINDOW     MainWindow
*****************************************************************************************
-->

<a name="mainwin"><BR><BR></a>

         <table border="0" width="100%" cellpadding=0 cellspacing=0>
            <tr>
              <td valign="top" align="right">
                <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
                  <tr>
                    <td class="title" width="100%" valign=middle align=center>
                    M<br/>
                    a<br/>
                    i<br/>
                    n<br/>
                    &nbsp;<br/>
                    W<br/>
                    i<br/>
                    n<br/>
                    d<br/>
                    o<br/>
                    w<br/>
                    </td>
                  </tr>
                </table>
              </td>
              <td width="100%" bgcolor="#000000">
                <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
                  <tr>
                    <td valign="top">
                      <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
                        <tr>
                          <td width="100%" valign=top align=left>
<p>
<table width="100%">

  <tbody>

    <tr>

      <td><h2>The Main Window</h2></td>

      <td align="right"><a href="#toc">top</a></td>

    </tr>

  </tbody>
</table>

</p>

<p><img style="width: 405px; height: 315px; float: right;" alt="" src="usersguide.htg/windowMain.jpg" border="3">
The main window (<em>shown at right</em>) appears when the program is run and
provides primary access to the
database of dorsal fin images and related sighting data. The area at
the top of the window
provides menus allowing the user to open catalogs,
fin images and previously saved fin files, 
create new catalogs, create and use new catalog categorization schemes,
perform exports and imports of fins, sighting data and full catalogs,
perform backups or restores of the current catalog, set up queues of
images to be compared offline against
the database, change various options which affect the
program's appearance and
functionality, and access online help. 
Below the menus are buttons for several of the most commonly 
performed actions.
</p>
<P>The scrollable left side of the main window provides a
list of all of the dorsal fins
in the database, including a thumbnail image of each. 
The column labels above the scrolled list function as buttons and
enable reordering
of the list based upon that column of data.  The small text entry area
at the bottom left of the window allows the user to search for a dorsal fin by 
entering the individual's ID. Alternatively, the user may select any 
individual fin by clicking its line with the mouse or by moving to its
line using the <B>next</B> and <B>previous</B> buttons at the bottom of the list.

</p>

<TABLE>
<TR>
	<TD>The right section of the window contains a tabbed notebook for
viewing all images and textual data associated with the currently 
selected fin. By default, the Modified Image tab is selected, as is
seen in the Main Window displayed above.
There are other tabs, shown to the right and below, which 
allow viewing of the Original Image, the traced Fin Outline, and the Fin Data.
Larger scale versions of the selected dolphin's images and fin outline may be viewed
by clicking on the displayed image or outline.</TD>
	<TD><TABLE><TR><TD>Original Image Tab</TD></TR><TR><TD><img style="width: 80%" alt="" src="usersguide.htg/windowMainOrigTab.jpg" border="3"></TD></TR></TABLE></TD>
</TR>
<TR>
	<TD><TABLE><TR><TD>Fin Outline Tab</TD></TR><TR><TD><img style="width: 80%" alt="" src="usersguide.htg/windowMainFinOutTab.jpg" border="3"></TD></TR></TABLE></TD>
	<TD><TABLE><TR><TD>Fin Data Tab</TD></TR><TR><TD><img style="width: 80%" alt="" src="usersguide.htg/windowMainFinDataTab.jpg" border="3"></TD></TR></TABLE></TD>
</TR>
</TABLE>

<BR>
<p>
If no database is loaded, certain menu items and buttons that depend on
access to a database are disabled, the scrolled area 
will be empty, and there will be no images or outlines displayed.  The user
may either create a new catalog or open an existing one in order to enable
these inactivated operations.
</p>

<table width="100%">
  <tbody>
    <tr>
<h3>Main Window Menus: </h3>
<br>
<!----fileMenu----------------------------------------------------------------------------------->
<b>The File Menu: </b>
<p><img style="float: left;" alt="" src="usersguide.htg/menuFile2.jpg" border="3">
The <b><a href="#mainwin_creating">"New Database"</a> </b>menu item opens 
the <A HREF="">Create Database Dialog</A> which allows users to create a new database.</p>

<p>The <b>"Open Image"</b> menu item opens a file chooser dialog that allows 
the user to select and open a dorsal fin image for processing. Once an image has 
been read into the program, it is displayed in the <a href="#tracewin">trace window</a>,
where the fin outline may be traced, sighting data may be entered, 
and the fin may either be saved for later use, added to the current catalog, 
or matched against known fins already in the catalog. 
Currently, DARWIN supports the use of jpeg, png, bmp, and pnm image files with no
restrictions on image sizes. <EM>This menu item is disabled
when there is no currently open catalog.</EM>
</p>

<p>The <b>"Open Traced Fin"</b> menu item opens a file chooser dialog that allows  
the user to select and load a previously saved fin. The selected <B><EM>traced fin</EM></B> will
have its modified image, outline trace, feature points and sighting data displayed in the 
<a href="#tracewin">trace window</a> where it is available for further processing. 
<EM>This menu item is disabled
when there is no currently open catalog.</EM>
<!-- Traced fin image files have a <B>.fin</B> or <B>.finz</B> file extension, and are 
created by the DARWIN software by pressing the "Save"
button in the trace window and their filenames end in <b>.fin</b>.  Normally, traced fin
files are created so that a collection of sighting images can be matched against images
in the catalog in a batch mode. -->
</p>

<p>The <b>"Open Database"</b> menu item opens a file chooser dialog that allows 
the user to select and load an existing database for use by the program. Each time DARWIN runs, 
its default behavior is to open the database that was in use the last time the program was used.
If a different database is desired, the "Open Database" menu item allow the user to make this change. 
The <B><EM>database files</EM></B> created by the darwin program all have filenames that
end in a <b>".db"</b> extension.
</p>

<p>The <b>"Matching Queue"</b> menu item opens a <A HREF="">matching queue dialog</A> that allows the user to
create a queue of saved fin traces to be matched against the database. This capability allows the 
user to match multiple new fin images against the database in an unattended fashion, and 
subsequently review the results of each of match at leisure.
</p>

<p>The <b>"Backup"</b> menu item initiates the backup of a catalog (database) including all of
its associated images. Whenever a backup is initiated a compressed archive files with a ".zip" 
extension is created in the <b>backups</b> folder.  The Actual name of this archive is constructed
by DARWIN using a standardized naming convention. Each backup has a name with this format 
(xxx_yyy_date[num].zip), where xxx is the name of the survey area, yyy is the name of the actual
database file, date is the date on which the backup was created, and num is a 
sequence number in case multiple backups were initiated on the same day.
<EM>This menu item is disabled
when there is no currently open catalog.</EM></p>

<p>The <b>"Restore"</b> menu item opens a file chooser dialog that allows the user
to select a backup archive and initiate the restoration of a catalog (database) and
its associated images. By default, all backups are located in DARWIN's backups folder
but the user may select an archive from any location. . NOTE: If the backup archive was
created with a DARWIN version prior to 2.0, then the user will be prompted to perform
a database format conversion to the new SQL database file format during the restore
operation.</p>

<p>The <strong>"Export"</strong> menu allows the user to export an entire catalog or a set of
one or more individual fins. Individual fins may be exported to .finz files.
<EM>This menu item is disabled
when there is no currently open catalog.</EM></p>

<p>The <b>"Export/Export Catalog"</b> submenu item initiates essentially the same action as a
backup, except that the user is allowed to select the location and filename for the exported archive
by using a file save dialog.
<EM>This menu item is disabled
when there is no currently open catalog.</EM></p>

<p>The <b>"Export/Export Fin"</b> menu item opens an <A HREF="">export finz dialog</A> that
allows the user to select one or more fins from the current database and have them each saved as
an individual fin (.finz) file.  The fin export provides an easy way to copy a fin from one 
database to another or to create a new database that is a subset of another database.
<EM>This menu item is disabled
when there is no currently open catalog.</EM></p>

<p>The <strong>"Import"</strong> menu allows the user to import an entire catalog or a set of
one or more individual fins. Individual fins may be imported from .finz files.
</p>
<p>The <b>"Import/Import Catalog"</b> submenu item initiates essentially the same action as a
restore.
</p>

<p>The <b>"Import/Import Fin"</b> menu item opens a <A HREF=""> file chooser dialog</A> that
allows the user to select one or more traced fin files (.finz files) and have them added to
the current database.  The fin import provides an easy way to copy a fin from one 
database to another or to create a new database that is a subset of another database.
</p>

<p>The <b>"Exit"</b> menu item exits the program.
</p>

<!----settingsMenu----------------------------------------------------------------------------------->
<b>The Settings Menu: </b>
<p><img style="width: 330px; height: 122px; float: left;" alt="" src="usersguide.htg/mainwin_settingsMenu.jpg" border="3"></p>

<p>The <b>"Options"</b> menu item opens the <a href="#options">options dialog window</a> that enables 
modifications of
several characteristics of the user interface (font and font size in the scrolled catalog list, color
of the trace used in the trace window) as well as modification of some of the parameters that affect
the performance of the dorsal fin extraction. 
</p>

<p>The <b>"Catalog Scheme"</b> menu item cascades into additional menu items which enable
the creation, viewing, editing and changing of the current catalog scheme. 
The Catalog Scheme effectively
subdivides the catalog into categories. The DARWIN software allows fins to be sorted 
based on categories and searches to be restricted to selected categories. The default 
is the Eckerd College scheme, which employs damage category names such as "Leading Edge," "Upper," 
"Middle," and others that identify the portion of the dorsal fin where the most 
significant damage is located.
Click <a href="#mainwin_scheme"> here</a> for additional information on Catalog Schemes. 
</p>

<!----dataMenu----------------------------------------------------------------------------------->
<b>The Data Menu: </b>
<p><img style="width: 162px; height: 57px; float: left;" alt="" src="usersguide.htg/mainwin_dataMenu.jpg" border="3">

<p>The <b>"Data"</b> menu item cascades into one selection which allows the user to export textual 
sighting data from the catalog for use in another program (such as SOCPROG) that can import 
tab-separated spreadsheet data.
Selecting this menu item will open a dialog window allowing the user to specify 
all details of the export process.  See
the section on <a href="#mainwin_exportSighting">exporting sighting data</a> for additional information.  
</p>

    </tr>
  </tbody>
</table>

<br/>
<b>Main Window Buttons: </b>

<p><a href="#tracewin"><img style="width: 60px; height: 55px; float: left;" alt="" src="usersguide.htg/mainwin_openimage.jpg" border="3"></a>
Enables a user to import a dorsal fin image. 
Once the image has been loaded, it is displayed in the 
<a href="#tracewin">trace window</a> for further processing. 
Currently, DARWIN supports use of <B>jpeg</B>, <B>png</B>, <B>bmp</B>, and <B>pnm</B> files of any size. 
</p>

<br/>
<p><a href="#tracewin"><img style="width: 60px; height: 55px; float: left;" alt="" src="usersguide.htg/mainwin_opentrace.jpg" border="3"></a>
Enables a user to import the trace of a dorsal fin image which has been previously saved. 
Once the traced image has been loaded, the image as modified previously using DARWIN and the
fin outline are displayed in the 
<a href="#tracewin">trace window</a> for further processing.  DARWIN 2.0 can import
traced fin images that were 
saved using either the old <B>.fin</B> format or the newer <B>.finz</B> format.
</p>

<br/>
<p><a href="#tracewin_queue"><img style="width: 55px; height: 55px; float: left;" alt="" src="usersguide.htg/mainwin_queue.jpg" border="3"></a>
Enables the creation of a queue of saved fin traces to
be matched against the database. This capability allows the
user to match multiple new fin images against the database in 
an unattended fashion, and subsequently
review the results of each of match at leisure.
</p>

<br/>
<p><img style="width: 51px; height: 55px; float: left;" alt="" src="usersguide.htg/mainwin_exit.jpg"
border="3">
Exits the program.
</p>

<br/>
<br/>
<p>These buttons, located at the bottom of the main window, allow
the user to quickly view individual
images and outlines or to modify or delete entries from the database.
</p>

<p><img style="width: 138px; height: 34px; float: left;" alt="" src="usersguide.htg/mainwin_previous.jpg" border=3>
Display the image, outline and sighting info of the
previous fin in the list
</p>
<br>
<p><img style="width: 138px; height: 34px; float: left;" alt="" src="usersguide.htg/mainwin_next.jpg" border=3>
Display the image, outline and sighting info of the next
fin in the list
</p>
<BR>
<p><img style="width: 138px; height: 34px; float: left;" alt="" src="usersguide.htg/mainwin_modify.jpg" border=3>
Modify the sighting data for the selected (highlighted) fin or delete it
 from the database.
</p>

<br><br>
<!----hidden buttons----------------------------------------------------------------------------------->
<b>Hidden Tools: </b>

<p>When the cursor is placed over either of the dorsal fin images or the trace of the fin 
outline in the tabbed notebook view in the right pane of the main window, the cursor changes to a
magnifying glass.  Clicking on the image causes a new viewing window to appear within
which the image or outline is magnified.  In the view of the fin outline, there is also a view of the 
chain code (the orientation of the fin as its outline is traversed) and a list of the locations of all
salient features.
</p>
<br>


</p>



                                  </td>
                                </tr>
                              </table>
                            </td>
                          </tr>
                        </table>
                      </td>
                    </tr>
                  </table>

<!--
*****************************************************************************************
                        Modify        Modify              Modify
*****************************************************************************************
-->
<a name="modify">&nbsp;</a>
<table border="0" width="100%" cellpadding=0 cellspacing=0>
  <tr>
  <td valign="top" align="right">
  <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
    <tr>
    <td class="title" width="100%" valign=middle align=center>
    M<br/>
    o<br/>
    d<br/>
    i<br/>
    f<br/>
    y<br/>
    &nbsp;<br/>
    D<br/>
    B<br/>
    </td>
    </tr>
  </table>
  </td>
  <td width="100%" bgcolor="#000000">
  <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
    <tr>
    <td valign="top">
    <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
      <tr>
      <td width="100%" valign=top align=left>

<!-- Title and link to top go here -->
<table width="100%">
  <tr>
    <td><h2>Modify Database Window</h2></td>
    <td align="right"><a href="#toc">top</a></td>
  </tr>
</table>
<!-- body of pane goes here -->
<img style="width: 288px; height: 246px; float: right;" alt="" src="usersguide.htg/modifywin_thmb.jpg" border="0">

The <B>Modify Database Window</B> (shown to the left) allows the user to 
modify the sighting data related to a fin in the catalog (database) or 
to remove the fin from the catalog altogether.  This window is accessed
by clicking the "Modify" button at the bottom of the right pane
in the Main Window.  
<P>
The window contains editable data entry fields and a dropdown list for catalog 
damage category, as well as three final action buttons.
<P>
<B>SAVE BUTTON:</B> This button saves the data reflected in the data entry
fields and in the dropdown category list selection as the new sighting 
data for this fin in the catalog.  It is not possible to change the
original image, the modified image or the fin outline trace from this
window.  To make these changes you must delete the fin completely from
the catalog, and then open and trace a new image, enter sighting 
data and finally add it to the catalog.  NOTE: There is no restriction on 
having multiple images and traced outlines for the same dolphin in
the catalog.  Just be aware that the sighting data is not shared between such 
fins.  Each must be entered and managed separately in the current DARWIN
version.
<P>
<B>DELETE FIN BUTTON:</B> This button removes the
fin from the SQL database file that holds fin data for all fins in the 
catalog.  The images related to the deleted fin will remain in the
catalog folder after deletion. In some earlier versions of DARWIN, the original
images could be shared between various fins, so the decision was made to leave images in the
folder.  Future versions will contain an option to purge orphaned images
to so disk space usage can be minimized as the catalogs grow.
<P>
<B>CANCEL BUTTON:</B> This cancels the Modify operation without making any changes to the
catalog, and returns the user to the Main Window.
<!-- end of body of pane -->

      </td>
    </tr>
    </table>
    </td>
    </tr>
  </table>
  </td>
  </tr>
</table>
<!-- end of BLANK PANE -->

<!--
*****************************************************************************************
                    Viewers            Viewers               Viewers
*****************************************************************************************
-->
<a name="viewers">&nbsp;</a>
<table border="0" width="100%" cellpadding=0 cellspacing=0>
  <tr>
  <td valign="top" align="right">
  <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
    <tr>
    <td class="title" width="100%" valign=middle align=center>
    V<br/>
    i<br/>
    e<br/>
    w<br/>
    e<br/>
    r<br/>
    s<br/>
    </td>
    </tr>
  </table>
  </td>
  <td width="100%" bgcolor="#000000">
  <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
    <tr>
    <td valign="top">
    <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
      <tr>
      <td width="100%" valign=top align=left>

<!-- Title and link to top go here -->
<table width="100%">
  <tr>
    <td><h2>Detail View Dialogs</h2></td>
    <td align="right"><a href="#toc">top</a></td>
  </tr>
</table>

<!-- body of pane goes here -->
 
  <a name="view_image"><B>View Image Dialog</B></a>
  <P>
  This window opens whenever you click on an image in either the Main Window or the 
  Match Results Window.  It gives the user a separate copy of the image along with
  a zoom in/out tool and scroll bars allowing close examination of the image.
  </p>
  <a name="view_trace"><B>View Traced Outline Dialog</B></a>
  <P>
  This window displays the traced outline of the fin,
  the data related to the positions of the feature points (Tip, Notch, etc),
  and the outline's chain code
  (a plot of the outline orientation as a function of position along the outline).
  This window appears anytime the user clicks on the outline trace in the
  Main Window.
  </p>
  <a name="view_aligned_traces"><B>View Aligned Outlines Dialog</B></a> 
  <P>
  This window shows the superimposed, mapped fin outlines, and the superimposed
  chain codes corresponding to a match of an unknown fin and a catalog fin.  This window
  opens whenever the user clicks on the outlines area within the Match Results Window.
  The scale is much larger than that of the outlines in the Match Results Window, so details
  of the match are easier to examine.
  </p>

<!-- end of body of pane -->

      </td>
    </tr>
    </table>
    </td>
    </tr>
  </table>
  </td>
  </tr>
</table>
<!-- end of BLANK PANE -->

<!-- 
*****************************************************************************************
                  Viewing Fins     VIEWING_FINS     Viewing Fins
*****************************************************************************************
-->
<a name="mainwin_viewing">&nbsp;</a>
<table border="0" width="100%" cellpadding=0 cellspacing=0>
  <tr>
  <td valign="top" align="right">
  <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
    <tr>
    <td class="title" width="100%" valign=middle align=center>
    V<br/>
    i<br/>
    e<br/>
    w<br/>
    i<br/>
    n<br/>
    g<br/>
    &nbsp;<br/>
    F<br/>
    i<br/>
    n<br/>
    s<br/>
    </td>
    </tr>
  </table>
  </td>
  <td width="100%" bgcolor="#000000">
  <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
    <tr>
    <td valign="top">
    <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
      <tr>
      <td width="100%" valign=top align=left>

<!-- Title and link to top go here -->
<table width="100%">
  <tr>
    <td><h2>Viewing images and sighting data from the catalog (database)</h2></td>
    <td align="right"><a href="#toc">top</a></td>
  </tr>
</table>

<!-- body of pane goes here -->

<p>All fins in the currently loaded catalog are listed in a sortable
and scrollable list on the left side of the main window.
By default, the fins are displayed in alphanumerical order by ID Code.
However, the fin list can be sorted at any time based on the contents of any column
by simply clicking on the column label.  

<P>
There are several ways to access a particular dorsal fin in the database.
<UL>
	<LI>Scroll the fin list and click on the line containing the thumbnail
image and textual data for the desired fin.
	<LI>Click the "Previous" and "Next"
buttons or use the Alt-P and Alt-N key combinations to move backward
and forward through the list in order to reach the desired fin.
	<LI>Enter the dolphin's
ID Code in the provided data entry area and click the "GoTo" button to move directly
to the desired fin.
</UL>

Once the fin of interest has been selected, the line containing it 
will be highlighted, and its images, traced outline, and all 
relevant sighting data will be displayed in the tabbed notebook
pages on the right side of the main window.  Click on the individual
tabs to view the desired image, outline or data.
<p>
The <B>"Modify"</B> button below the tabbed notebook pages may be clicked
to make changes to the selected fin's entry in the catalog.  This button 
opens a <A HREF="">Modify Database Window</A> which contains interactive data entry fields
(allowing user changes to the textual data) and buttons for committing
the modification to the fin entry in the database, deletion of
the fin from the database, or cancellation of the change.
<p>
To view an enlarged version of either image, click on the image.
A zoomable window will appear. Buttons on the top left of the zoomable
window provide the ability to zoom in, zoom out and to
flip the image horizontally.
<p>
To view more information about the outline of the dorsal fin, click
on the displayed outline and a new window will appear containing 
the following.
<UL>
	<LI>Upper Left: The extracted fin outline and 
all automatically selected feature points (leading edge start,
leading edge end, tip, largest notch, trailing edge end).
	<LI>Upper Right:  The outline's chain code (its orientation at each
point).
	<LI>Lower Half: Additional outline
information (<em>primarily of use to the developers of
DARWIN for the purpose of testing</em>) such as
number of points on the outline and positions of features.
</UL>
      </td>
    </tr>
    </table>
    </td>
    </tr>
  </table>
  </td>
  </tr>
</table>
<!-- end of BLANK PANE -->

<!-- 
*****************************************************************************************
                  CatalogSchemes     CATALOG_SCHEMES     CatalogSchemes
*****************************************************************************************
-->
<BR>

 <!-- Catalog Category Schemes Pane -->
<a name="mainwin_scheme">&nbsp;</a>
<table border="0" width="100%" cellpadding=0 cellspacing=0>
  <tr>
  <td valign="top" align="right">
  <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
    <tr>
    <td class="title" width="100%" valign=middle align=center>
    C<br/>
    a<br/>
    t<br/>
    a<br/>
    l<br/>
    o<br/>
    g<br/>
    &nbsp;<br/>
    S<br/>
    c<br/>
    h<br/>
    e<br/>
    m<br/>
    e<br/>
    s<br/>
    </td>
    </tr>
  </table>
  </td>
  <td width="100%" bgcolor="#000000">
  <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
    <tr>
    <td valign="top">
    <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
      <tr>
      <td width="100%" valign=top align=left>

<table width="100%">
        <tbody>
        <tr>
        <td><h2>Creating, Editing and Selecting Catalog Schemes</h2></td>
        <td align="right"><a href="#toc">top</a></td>
        </tr>
      </tbody>
      </table>
<P>
Catalog schemes enable a catalog of dorsal fin images to be organized into categories based on areas
of evident damage or, for that matter, any other organizational rationale.  The individual category names
become user selectable when adding fin images to the database, and the database can be sorted 
and browsed by category in either the main window or the match results window.  
When new images from sighting data are matched against the catalog, the match can be limited 
to user selected categories as desired. <br> <br>
<TABLE cellspacing="5" border="1" cellpadding="5">
<TR>
	<TD><img style="width: 354px; height: 375px; float: left;" alt="" src="usersguide.htg/dialogCatScheme.jpg" border="0"></TD>
	<TD>
To create a new catalog scheme, from the main window, select <b>"Define New Scheme"</b> from the <b>Settings/Catalog Scheme</b> menu. 
This will open the dialog shown to the left.  Click in the top text entry box
and enter the desired name for the
new catalog scheme.  Click in the lower text entry box and type as many category names as
desired (one on each line).  Hit enter (or carriage return) to extend the text entry box to
the next line, and use the mouse and backspace key to edit category names as desired.
When satisfied, click the <B>OK</B> button to add this scheme to DARWIN.  At any time, clicking
the <B>Cancel</B> button will abandon the process without adding the new scheme.</TD>
</TR>
<TR>
	<TD><img  alt="" src="usersguide.htg/schemeEdit.jpg" border="0"></TD>
	<TD>From the main window, selecting <b>View/Edit</b> on the <b>Settings/Catalog Scheme</b> drop down menu opens the dialog to the left.  This dialog allows the user to view any defined
	scheme by clicking on its name in the <B>Catalog Schemes</B> list.  If editing of a scheme 
	is desired, click the <B>Edit Scheme(s)</B> button to enable editing. Then right-clicking on 
	any scheme name allows two actions (<I>renaming the scheme or removing the scheme</I>).
	Right-clicking on any scheme category name allows three actions (<I>renaming of a category,
	insertion of a new category, or removal of a category</I>).  Once editing is complete, click the <B>OK</B>
	button to commit the changes, or click <B>Cancel</B> to abandon editing.  
	<P>
	NOTE: The Eckerd College 
	(default) scheme cannot be edited or removed.</TD>
</TR>
<TR>
	<TD><img  alt="" src="usersguide.htg/schemeSelect.jpg" border="0"></TD>
	<TD> From the main window, the <b>Select 
Active</b> item on the <b>Settings/Catalog Scheme</b> drop down menu allows selection of a 
different default scheme to be used in the creation of any new catalog. Simply select the
scheme desired from the displayed list and click OK to make the change.  
<P>
NOTE: This only 
affects new catalogs created after this selection is made.  Selection of a different
scheme does not affect the scheme used in any existing catalog.</TD>
</TR>
</TABLE><p>

    </tr>
  </tbody>
</table>
<!-- end of table body -->
      </td>
      </tr>
    </table>
    </td>
    </tr>
  </table>
  </td>
  </tr>
</table>
<!-- end of BLANK PANE -->

<!--
*****************************************************************************************
                Creating Catalogs     CREATING CATALOGS     Creating Catalogs    
*****************************************************************************************
-->

<!-- Help Pane -->
<a name="mainwin_creating">&nbsp;</a>
<table border="0" width="100%" cellpadding=0 cellspacing=0>
  <tr>
  <td valign="top" align="right">
  <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
    <tr>
    <td class="title" width="100%" valign=middle align=center>
    C<br>
    r<br>
    e<br>
    a<br>
    t<br>
    i<br>
    n<br>
    g<br>
    &nbsp;<br>
    C<br>
    a<br>
    t<br>
    a<br>
    l<br>
    o<br>
    g<br>
    s<br>
    </td>
    </tr>
  </table>
  </td>
  <td width="100%" bgcolor="#000000">
  <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
    <tr>
    <td valign="top">
    <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
      <tr>
      <td width="100%" valign=top align=left>

<!-- Title and link to top go here -->
<table width="100%">
  <tr>
    <td><h2>Creating a new Catalog (database)</h2></td>
    <td align="right"><a href="#toc">top</a></td>
  </tr>
</table>

<!-- body of pane goes here -->
<P>
<table width="100%">
  <tbody>
    <tr>
      <img style="width: 393px; height: 291px; float: right" alt="" src="usersguide.htg/mainwin_newDatabase.jpg" border="0">
<p>
To create a new catalog (database), from the main window, select <b>"New Database"</b> from the <b>File</b> menu. 
This will open the dialog window shown to the right.  There are two options available,
and one simply clicks on the appropriate radio button to select which action is desired. 
<UL>
	<LI>Create a new catalog (or database) within any existing survey area
	<LI>Create an entirely new survey area containing a new catalog
</UL>

<p>
If creating a new catalog within a survey area, select the survey area from the pull-down list,
select a catalog scheme from the list of defined schemes, enter the database file name for the
new catalog in the text entry area, and click OK.  The new catalog will be created, and the
program will return to the main window with the new catalog opened an ready for use. <I>Note that the database
file's name must end in ".db" and the new name must differ from all existing database filenames
within the same survey area.</I>
<p>
If defining a new survey area, enter the name of the new survey area, enter the name of the initial
database file, select the catalog scheme, and click OK.
<p>
<I><B>Once a catalog has been created, its catalog scheme cannot be
changed.</B></I>
<P>
To add fins to the newly
created database see the section on <a href="#tracewin_adding"><em>adding a dorsal
fin image to the database.</em></a> 
</p>
    </tr>
  </tbody>
</table>
<!-- end of pane body -->
      </td>
    </tr>
    </table>
    </td>
    </tr>
  </table>
  </td>
  </tr>
</table>
<!-- end of BLANK PANE -->


<!--
*****************************************************************************************
                        Data Export     DATA_EXPORT     Data Export 
*****************************************************************************************
-->
<a name="mainwin_exportSighting">&nbsp;</a>
<table border="0" width="100%" cellpadding=0 cellspacing=0>
  <tr>
  <td valign="top" align="right">
  <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
    <tr>
    <td class="title" width="100%" valign=middle align=center>
    D<br/>
    a<br/>
    t<br/>
    a<br/>
    &nbsp;<br/>
    E<br/>
    x<br/>
    p<br/>
    o<br/>
    r<br/>
    t<br/>
    </td>
    </tr>
  </table>
  </td>
  <td width="100%" bgcolor="#000000">
  <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
    <tr>
    <td valign="top">
    <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
      <tr>
      <td width="100%" valign=top align=left>

<!-- Title and link to top go here -->
<table width="100%">
  <tr>
    <td><h2>Exporting Sighting Data</h2></td>
    <td align="right"><a href="#toc">top</a></td>
  </tr>
</table>

<!-- body of pane goes here -->
<P>
<table width="100%">
  <tbody>
    <tr>
      <img style="width: 275px; height: 219px; float: left;" alt="" src="usersguide.htg/mainwin_dataExport.jpg" border="0">

<p>To export the sighting data for each of the individuals in the catalog, from the main window,
select <b>"Export Selected Data"</b> from the <b>Data</b> menu. 
This will open the dialog window shown to the left.  
<P>
Choose the data items to be exported and click <B>OK</B>.
<P>
A Save File dialog will open.  Within it, simply enter a filename 
(<I>something like "fin_data.txt"</I>) and click the <B>Save</B>
button to save the data file.  
<P>
The file is created as tab-separated text and is suitable for
import into Excel and many other spreadsheet and database programs.  The default location
for the file is the <B>sightings</B> folder within the current survey area.  However, the user
may select any location by clicking the "Browse for other folders" button, which opens a more
detailed version of the Save File dialog.
</p>


    </tr>
  </tbody>
</table>

</p>





      </td>
    </tr>
    </table>
    </td>
    </tr>
  </table>
  </td>
  </tr>
</table>
<!-- end of BLANK PANE -->

<!--
*****************************************************************************************
                  Backup      Restore     Export     Import
*****************************************************************************************
-->
<a name="sometag">&nbsp;</a>
<table border="0" width="100%" cellpadding=0 cellspacing=0>
  <tr>
  <td valign="top" align="right">
  <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
    <tr>
    <td class="title" width="100%" valign=middle align=center>
    B<br/>
    a<br/>
    c<br/>
    k<br/>
    u<br/>
    p<br/>
    s<br/>
    &nbsp;<br/>
    E<br/>
    t<br/>
    c<br/>
    </td>
    </tr>
  </table>
  </td>
  <td width="100%" bgcolor="#000000">
  <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
    <tr>
    <td valign="top">
    <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
      <tr>
      <td width="100%" valign=top align=left>

<!-- Title and link to top go here -->
<table width="100%">
  <tr>
    <td><h2>Backup/Restore and Export/Import</h2></td>
    <td align="right"><a href="#toc">top</a></td>
  </tr>
</table>

<!-- body of pane goes here -->
  <a name="backup_restore"><B>Catalog Backup and Restore</B></a>
<P>
A complete backup of the currently open catalog can be initiated from the main window 
by clicking on the "File/Backup" menu option.  A popup information dialog informs you that
the process is beginning and that details will be visible in the console window.  
Simply click OK to continue. The backup process is automatic from that
point on.  The catalog's SQL database file and all associated images are collected
into a single zipped archive file.  The backup archive file is placed in
the "backups" folder and is named automatically, something like "xxx_yyy_mm_dd_yy[n].zip" based on the 
survey area "xxx", the catalog name "yyy", the date "mm/dd/yy", and a suffix "[n]" 
indicating the nth backup of the same catalog on the same date.
<P>
A lost or corrupted catalog may be restored from a previous backup by clicking on
the "File/Restore" menu option in the main window.  Any currently open catalog will be
closed, and you will be shown a file open dialog from which you can select which backup
file to use.  Select the backup file and click the Open button to continue.
You will be shown a warning that the restoration is about to occur.  You will have no option
to modify the location or names of survey area or catalog during the process.  If you
want to continue, then click OK.  Otherwise, click Cancel to abort the restore process.
NOTE: You should not use backup and restore if you are attempting to move a catalog
to another location.  Use export and import for this purpose.
</P>
  <a name="export_import"><B>Catalog Export and Import</B></a>
<P>
The best way to move a catalog from one installation of DARWIN to another is to
export it from the source installation and import it into the destination installation.
This will work even if the source installation of DARWIN is an older version of the
software.
An export operation is initiated by clicking on the "File/Export/Export Catalog" menu option
in the main window.  An export is essentially the same process as a backup, except you get to choose 
the location and the name of the compressed archive file.  You will be shown a file save dialog
and you may use it to change folders and name the archive file.  The archive filename must end in 
".zip" and you click the Save button to commit to the save.  Details of the archival process
will be displayed in the console window.
<P>
The importation of a catalog into DARWIN is initiated by clicking the "File/Import/Import Catalog"
menu option in the main window.  When you import a catalog, DARWIN requires this to be done in
conjunction with the creation of a new survey area.  This restriction ensures that there are
no image file name conflicts occur that could compromise the integrity of any existing
catalog or the newly imported catalog.  Such name conflicts are prevented while adding
or removing fins from an existing catalog, but cannot be prevented by the import process
if the import is allowed in an existing survey area.  The catalog SQL database filename is set
by the archive, so you have control only of the name of the new survey area.  Once you have
entered a survey area name that differs from the displayed, existing ones, simply click OK
to perform the import. The import occurs in three stages: 1) the folder structure for the new 
survey area is created, 2) all images and the database file are 
are extracted from the archive and are placed in the catalog folder within the new survey area, 
and 3) the new catalog is opened for your use.
<P>
NOTE: If the archive was created with a version of DARWIN prior to DARWIN-2.0, the non-SQL
database file will have to be converted to the SQL format.  You will be prompted for an
indication of whether the database file only or the entire catalog (with images) should be
backed up prior to this conversion.  Since you are importing from an archive, you may skip the 
complete or partial backup by unchecking either or both options and continue with the conversion by clicking OK.
</P>
  <a name="export_import_finz"><B>Exporting and Importing individual or multiple traced FINs</B></a>
<p>
It is possible to export single fins and collections of fins from the current catalog, and to
import single fins or collections of fins into the current catalog.
Each fin in these scenarios will either be saved to or loaded from a <I>finz</I> file.
<P>
Exporting fin(s) is initiated by clicking the "File/Export/Export Fin" menu option in the
main window.  You will be shown a list of all fins in the current catalog.  You may select one
or more of the fins from this list using the mouse.  You may hold the control key while 
clicking fins to select multiple fins.  You may hold the shift key while clicking to select
a single continuous range of fins.  Once the fin or fins are selected, click the "Save Fin(s)"
button to save the fin(s).  If only one fin is selected, you will be shown a save file
dialog and will be prompted to select a file name for the finz file.  If multiple fins
are selected, then you will see a file save dialog and must choose the folder within to
save the collection of finz files.  In either case, click the Save button to commit to 
the save operation.  NOTE: When exporting multiple fins, DARWIN will name the finz files 
based on the dolphin's ID (something like "aloa.finz").
<P>
Fins that were saved from the trace window or were exported from other catalogs can be
imported into the current catalog using the "File/Import/Import Fin" menu option in the main window.
You will see an Open File dialog and can use it to select one or more "*.fin" or "*.finz" files
to be imported. CAUTION: Importing a fin into a catalog from which it was exported is allowed
and will result in duplicate entries in the catalog. If importing from an older "*.fin" file
it is possible to lose the images if they are not in the same folder as the fin file.  Be careful
about manually moving older fin files around in folders.
</p>

<!-- end of body of pane -->

      </td>
    </tr>
    </table>
    </td>
    </tr>
  </table>
  </td>
  </tr>
</table>
<!-- end of BLANK PANE -->

<!--
*****************************************************************************************
                Finz Viewer          Finz Viewer         Finz Viewer
*****************************************************************************************
-->

 <!-- Help Pane -->
<a name="view_finz">&nbsp;</a>
<table border="0" width="100%" cellpadding=0 cellspacing=0>
  <tr>
  <td valign="top" align="right">
  <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
    <tr>
    <td class="title" width="100%" valign=middle align=center>
    F<br/>
    i<br/>
    n<br/>
    z<br/>
    &nbsp;<br/>
    V<br/>
    i<br/>
    e<br/>
    w<br/>
    e<br/>
    r<br/>
    </td>
    </tr>
  </table>
  </td>
  <td width="100%" bgcolor="#000000">
  <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
    <tr>
    <td valign="top">
    <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
      <tr>
      <td width="100%" valign=top align=left>

<!-- Title and link to top go here -->
<table width="100%">
  <tr>
    <td><h2>Using DARWIN as a stand-alone <B><I>Fin</I></B> (image & traced outline) Viewer</h2></td>
    <td align="right"><a href="#toc">top</a></td>
  </tr>
</table>

<!-- body of pane goes here -->
When you install DARWIN-2.0 the program is associated with "*.finz" files so that you can open
these saved fin files directly for viewing.  To do so you simply double-click on the desired finz file
within the windows explorer, or right-click on the file and select "Open with->darwin" from the 
displayed windows menu.  
Opening the finz file this way opens it directly into the 
<A HREF="#tracewin">Trace Window</A> (described below).  
<P>
Note: Since the fin has been opened without any catalog
the Trace Window will function only as a viewer.  You will not be able to initiate any other actions
such as a search of the database from here.
</p>
<!-- end of body of pane -->

      </td>
    </tr>
    </table>
    </td>
    </tr>
  </table>
  </td>
  </tr>
</table>
<!-- end of BLANK PANE -->

<!--
*****************************************************************************************
                        TraceWindow     TRACE_WINDOW     TraceWindow 
*****************************************************************************************
-->

<a name="tracewin"><BR><BR><a/>
<table border="0" width="100%" cellpadding=0 cellspacing=0>
  <tr>
  <td valign="top" align="right">
  <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
    <tr>
    <td class="title" width="100%" valign=middle align=center>
    T<br/>
    r<br/>
    a<br/>
    c<br/>
    e<br/>
    &nbsp;<br/>
    W<br/>
    i<br/>
    n<br/>
    d<br/>
    o<br/>
    w<br/>
    </td>
    </tr>
  </table>
  </td>
  <td width="100%" bgcolor="#000000">
  <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
    <tr>
    <td valign="top">
    <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
      <tr>
      <td width="100%" valign=top align=left>

<!-- Title and link to top go here -->
<table width="100%">
  <tbody>
    <tr>
      <td><h2>The Trace Window</h2></td>
      <td align="right"><a href="#toc">top</a></td>
    </tr>
  </tbody>
</table>

<!-- pane body goes here -->

<img style="width: 306px; height: 284px; float: right;" alt="" src="usersguide.htg/tracewin_thmb.jpg">
The <B>Trace Window</B> (<em>shown at right</em>) appears whenever a new fin
image or a previously saved fin is opened. The Trace Window provides the following major functionality,
appropriately accessible depending on the stage of usage 
(enhancing the image, tracing the fin outline, and locating the key outline features).

<UL>
	<LI>Support for zooming (in or out) and scrolling within the image.
	<LI>A set of image enhancement tools.
	<UL>
		<LI>Flip horizontally
		<LI>Enhance contrast
		<LI>Enhance brightness
		<LI>Crop
		<LI>Undo/Redo
	</UL>
	<LI>Automatic detection and tracing of the fin outline.
	<LI>A set of tools for manually tracing, erasing, or repairing the fin outline trace.
	<UL>
		<LI>Click trace begin and end
		<LI>Manually trace the outline
		<LI>Add outline point
		<LI>Adjust outline point position 
		<LI>Erase outline point
		<LI>Chop dangling end of outline
	</UL>
	<LI>Automatic detection of key fin outline features.
	<LI>A tool for manual repositioning of key fin outline features.
	<LI>A set of textual data entry areas, and drop-down menus for sighting data.
	<LI>A set of major action buttons allowing the user to ...
	<UL>
		<LI>Add the traced fin to the database
		<LI>Save the traced fin in a separate fin file
		<LI>Match the traced fin against the known fins in the database
		<LI>Export the fin's textual data, saving it in a tab-separated text file
		<LI>Close the Trace Window
	</UL>
</UL>
<A name="tracewin_tracing"></A>
<H3>Tracing the Fin Outline</H3>
Tracing is a three step process, and each step is accessed in turn by clicking on one of
the following buttons:

<P><a href="#tracewin_modify"><img style="border: 0px solid ; width: 88px; height: 49px; float: left" alt="" src="usersguide.htg/tracewin_modify.jpg"></a> 
Whenever a new fin image is opened, the trace window opens in Modify Image mode with the 
image enhancement tools enabled.
<a href="#tracewin_modify">(Click here for details on image enhancement operations.</a>)
<P>
Any image operation can be undone, but changes can only be rolled back one step.
<P>
The image should be cropped so that the fin occupies a significant area within the image,
and ALL fins must be oriented so that the dolphin <B>"swims left"</B> before proceeding further.  Even though
a fin may appear to be successfully traced if it faces right, the detection of significant
outline features and the performance of the matching process will be degraded.  DARWIN
keeps track of the "flipped" status of images, and will always display an indicator
to inform the user that a flipped image is being displayed.
<p>
If the image needs no enhancement, the user may simply click on the "Trace Outline" button,
to proceed. 


<p><a href="#tracewin_trace"><img style="border: 0px solid ; width: 80px; height: 43px; float: left" alt="" src="usersguide.htg/tracewin_trace.jpg"></a> 
Once the user clicks this button, the cursor will change to an arrow with a "*" on its tail.  The 
user must click the first point of the leading edge and the last point of the trailing edge to
identify the bounds of the desired fin outline trace.  
<P>
The program then attempts to automatically
detect and trace the fin outline.  If the outline generation is successful, the
outline is displayed in the trace window.  If not, the user is informed and is asked to manually
trace the outline.  This manual trace is performed by a click and drag operation, and the
outline need not be exact.  DARWIN will tighten the fit of the user supplied outline to the 
fin once the user releases the mouse button.  
<P>
The user always has the option to modify the
outline (add, move or delete points) or to provide a new hand sketched trace of
the automatically generated outline. 
(<a href="#tracewin_trace">Click here for details on tracing operations.</a>)

<p><a href="#tracewin_features"><img style="border: 0px solid ; width: 107px; height: 52px; float: left" alt="" src="usersguide.htg/tracewin_locatefeatures.jpg"></a>
After a fin is traced, the user may click the "Locate Features" button
to have the program automatically locate the feature points (fin tip, largest
notch, etc.). The user has the opportunity to view and reposition the
automatically detected points. 
(<a href="#tracewin_features">Click here for details on repositioning feature points</a>)
<P>
If a search of the database is begun without pressing this button, the
feature points are still generated, but the user will lose the opportunity to 
confirm their location.


<a name="tracewin_modify"></a>
<h3>Buttons for Image Modification: the Trace Window</h3>
When the "Modify Image" button is clicked, the area at the top of the trace window 
provides buttons for
enhancing or manipulating a new image. These enhancements may improve
the quality of the outline which is generated for query of the
database. Copies of both original image and modified (<em>enhanced</em>)
image may be saved along with the fin outline in either an individual 
fin file (useful for later processing) or may the same may be added to the 
database at any time.

<p><img src="usersguide.htg/undo.jpg" align="left" height="30" width="30">
</p>

<p>Undo previous action/modification
</p>

<p><img src="usersguide.htg/redo.jpg" align="left">
</p>

<p>Redo previous undo action/modification
</p>

<p><img src="usersguide.htg/flip.jpg" align="left" height="30" width="42">Flip image along
horizontal axis
</p>

<p><img src="usersguide.htg/img13.jpg" align="left" height="30" width="30">
</p>

<p>Alter/increase image contrast
</p>

<p><img src="usersguide.htg/img14.jpg" align="left" height="30" width="30">
</p>

<p>Alter/increase image brightness
</p>

<p><img src="usersguide.htg/img17.jpg" align="left" height="30" width="30">
</p>

<p>Crop image (<em>image should be cropped to include only the dorsal fin for best performance of the 
autotrace feature</em>)
</p>
<BR>
<a name="tracewin_trace"></a>
<h3>Buttons for Outline Tracing: the Trace Window</h3>
When the "Trace Outline" button is clicked, the area at the top of the trace window
provides tools to modify or re-create an outline
of the dorsal fin (<em>necessary to
generate a query of the database or to store an image in the database.</em>)

<p><img src="usersguide.htg/zoom.jpg" align="left" height="30" width="30">
</p>

<p>ZOOM - When this tool is selected, the image may be magnified by
clicking on
the image (<em>clicking with the shift button depressed will decrease the
magnification factor</em>)
</p>

<p><img src="usersguide.htg/init-trace.jpg" align="left" height="30" width="30">
</p>

<p>AUTOTRACE - This tool is used by the user to designate the beginning of the 
fin's leading edge and the end of its trailing edge, prior to the beginning
of the outline autotrace operation. 
</p>

<p><img src="usersguide.htg/manual-trace.jpg" align="left" height="30" width="30">
</p>

<p>TRACE - When this tool is selected the user may hand trace the
outline. The mouse button must remain depressed while dragging the
cursor along the outline.  Upon release, the outline will be repositioned
using active contours for more precise placement.  (<em>Note: The
outline should be traced from left to right, and the image should be
oriented such that the leading edge is on the left</em>)
</p>

<p><img src="usersguide.htg/insert-pt.jpg" align="left" height="30" width="30">
</p>

<p>ADD POINT - When this tool is selected, the user may insert a
point into an existing
outline. Additional points may be desirable to capture small or deep
notches which are not effectively captured by the automated
placement of the outline.
</p>

<p><img src="usersguide.htg/move-pt.jpg" align="left" height="30" width="30">
MOVE POINT - When 
this tool is selected, the user may reposition a point in the
existing outline.
</p>

<p><img src="usersguide.htg/erase-pts.jpg" align="left" height="30" width="30">
</p>

<p>ERASE POINT - When this tool is selected the user may erase
points in the outline. (<em> Note: if the entire outline is to be erased, it is easier to select the
pencil tool and begin the trace of the new outline.  You will be asked if you wish to discard the
current outline.</em>)

</p>

<p><img src="usersguide.htg/trim-end-pts.jpg" align="left" height="30" width="30">
</p>

<p>CHOP TOOL - When this tool is selected the user may chop off either tail of the outline.
</p>
<BR>

<A name="tracewin_features"></A>
<h3>Buttons for Repositioning the Feature Points: the Trace Window</h3>
<p>When the "Locate Features" button is clicked, the area at the top of the trace window
provides tools to view and reposition feature points used in the matching process.
For example if the point identified as the tip of the dorsal fin is not as desired
by the user, the point may be dragged to the desired location.

<p><img src="usersguide.htg/move-pt.jpg" align="left" height="30" width="30">
MOVE POINT - When this tool is selected, the user may reposition a feature point along the existing outline. (<em>Simply drag and drop the errant feature point.</em>)</p>

<p><img src="usersguide.htg/zoom.jpg" align="left" height="30" width="30">ZOOM - When this tool is
selected, the image may be magnified by
clicking on
the image (<em>clicking with the shift button depressed will decrease the
magnification factor</em>)</p>

<p></p>

<A HREF="tracewin_major_actions"></A>
<H3>Major Action Buttons</H3>
<p>The buttons in the bottom right area of the trace window 
allow further use of the traced fins.
</p>

<p><img style="width: 136px; height: 32px; float: left;" alt="" src="usersguide.htg/tracewin-export.jpg"> </p>
<p>Export the sighting data from the trace window and append it to a file located in the <I><B>sightings</B></I> folder 
of the survey area in use.  The name of the file will begin
with <I>"SightingDataLogForArea_xxx.txt"</I> where <I>xxx</I> is the name of the survey area containing the
currently open catalog.</p>

<p><img style="width: 136px; height: 32px; float: left;" alt="" src="usersguide.htg/tracewin-match.jpg"> </p>

<p>Compare the traced outline of the fin against <I>known</I> dorsal
fin outlines contained in the database.
</p>

<BR>
<p><img style="width: 136px; height: 32px; float: left;" alt="" src="usersguide.htg/tracewin-save.jpg">
</p>

<p>Save the dorsal fin image, dorsal fin outline and
sighting information to a separate file such that the fin may be matched
against the database at a later time. (<em>Note:  This feature may be used
to initiate a single match at a later date or to create a queue of fins
for unattended, queued matching.</em>)

</p>

<p><img style="width: 136px; height: 32px; float: left;" alt="" src="usersguide.htg/tracewin-add2DB.jpg">
</p>

<p>Add the traced fin to the database. The outline of the dorsal fin must be
traced and the fin must be assigned an ID code <I>before</I> this action can be performed.
</p>

<p><img style="width: 136px; height: 32px; float: left;" alt="" src="usersguide.htg/tracewin-cnx.jpg">
</p>

<p>Cancel the processing of the dorsal fin image and close
the trace window.

</p>




                                  </td>
                                </tr>
                              </table>
                            </td>
                          </tr>
                        </table>
                      </td>
                    </tr>
                  </table>

<!--
*****************************************************************************************
               Adding a Fin to Catalog          Adding a Fin to Catalog
*****************************************************************************************
-->
<a name="tracewin_adding">&nbsp;</a>
<table border="0" width="100%" cellpadding=0 cellspacing=0>
  <tr>
  <td valign="top" align="right">
  <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
    <tr>
    <td class="title" width="100%" valign=middle align=center>
    A<br/>
    d<br/>
    d<br/>
    i<br/>
    n<br/>
    g<br/>
    &nbsp;<br/>
    F<br/>
    i<br/>
    n<br/>
    s<br/>
    &nbsp;<br/>
    t<br/>
    o<br/>
    &nbsp;<br/>
    C<br/>
    a<br/>
    t<br/>
    a<br/>
    l<br/>
    o<br/>
    g<br/>
    </td>
    </tr>
  </table>
  </td>
  <td width="100%" bgcolor="#000000">
  <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
    <tr>
    <td valign="top">
    <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
      <tr>
      <td width="100%" valign=top align=left>

<!-- Title and link to top go here -->
<table width="100%">
  <tr>
    <td><h2>Adding a dorsal fin to the catalog</h2></td>
    <td align="right"><a href="#toc">top</a></td>
  </tr>
</table>

<!-- body of pane goes here -->

<p>Click on the "Open" button or use the "File/Open Image" menu option 
in the main window to locate and open a dorsal fin image file. The image
will be displayed in the trace window. 
<P>
Orient the dorsal fin such that the leading
edge of the dorsal fin is on
the left. <em>(The "Flip Horizontal" button may be used.)</em>
<P>
Click on the "Trace Outline" button to automatically generate an outline 
of the dorsal fin.
If the outline cannot be generated, or if the generated outline is
unacceptable, click on the pencil icon and trace the outline
from leading edge to trailing edge without releasing the mouse button. Once the mouse
button is released, the
program will attempt to accurately position the chain of points along
the actual edge of the dorsal
fin. To ensure that important identification features are adequately
captured by the outline,
individual points may be added, moved or erased using the buttons to
the right of the pencil. For
easier tracing or modification of the outline, the user may zoom in or
out using the magnifying
glass. Also, user may resize the trace window by positioning the cursor
on the edge of the
window and dragging the edge of the window to the desired position. 

<p>Once an acceptable outline of the fin has been created,
enter relevant sighting data in the text
entry boxes on the right. 
<P>
Click the "Add to Database" button in the
trace window. <I>Copies</I> of the original and modified images, the 
fin outline and feature points, and all sighting data will
be added to the currently open database (or catalog).


<P>
Remember that the DARWIN folder hierarchy is organized to support multiple
<EM>Survey Areas</EM>, and within each survey area multiple
databases (or catalogs) are allowed.  The user has control
over the creation of <I>survey areas</I> and <I>catalogs</I> from the main window.
</p>
<!-- end of body of pane -->

      </td>
    </tr>
    </table>
    </td>
    </tr>
  </table>
  </td>
  </tr>
</table>
<!-- end of PANE -->


<!--
*****************************************************************************************
                Matching Fins          Matching Fins          Matching Fins
*****************************************************************************************
-->
<a name="tracewin_comparing">&nbsp;</a>
<table border="0" width="100%" cellpadding=0 cellspacing=0>
  <tr>
  <td valign="top" align="right">
  <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
    <tr>
    <td class="title" width="100%" valign=middle align=center>
    C<br/>
    o<br/>
    m<br/>
    p<br/>
    a<br/>
    r<br/>
    i<br/>
    n<br/>
    g<br/>
    &nbsp;<br/>
    F<br/>
    i<br/>
    n<br/>
    s<br/>
    </td>
    </tr>
  </table>
  </td>
  <td width="100%" bgcolor="#000000">
  <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
    <tr>
    <td valign="top">
    <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
      <tr>
      <td width="100%" valign=top align=left>

<!-- Title and link to top go here -->
<table width="100%">
  <tr>
    <td><h2>Comparing an <I>unknown</I> dorsal fin to traced fin images in the catalog</h2></td>
    <td align="right"><a href="#toc">top</a></td>
  </tr>
</table>

<!-- body of pane goes here -->

<p>Click on the "Open Image" button or the "File/Open Image" menu option 
in the main window to locate and open a dorsal fin
image in the trace window, and then trace the fin as indicated above. Alternatively, you may
click on the "Open Fin" button or the "File/Open Traced Fin" menu option 
in the main window to load a previously traced and saved fin into the trace window.

<a name="matchwin">&nbsp;</a>
<p><img style="width: 356; height: 206; float: right;" alt="" src="usersguide.htg/matchwin_thmb.jpg">
<P>
Click on the "Match" button to compare the
traced outline of the dorsal fin to <I>known</I> traced fin images in the catalog. 
The <B><I>Matching Dialog</I></B> (<em>shown at right</em>)
will appear.  </p>
<p>
Select the catalog categories to be searched.  Any set of specific
catalog categories (or all of them) is allowed. The "Select All" and "Clear All"
buttons allow a quick way to affect multiple category selections.  By default,
the category that the unknown fin has been assigned will be the only
category that is pre-checked in the matching window. 
<P>
Select a search method.  The "Align
Iteratively" button produces the best results by far.
The range of points along the fin outline to be considered while
computing the quality of the match can also be selected.  Options
are "All Points" or "Trailing Edge Points Only." 
<P>
Click the "Start" button to begin the matching process.
When complete, the <a href="#matchreswin">match results window</a> will
automatically be displayed containing a list of fins in the database,
rank ordered by their similarity to the
unknown fin. 
<!-- end of body of pane -->

      </td>
    </tr>
    </table>
    </td>
    </tr>
  </table>
  </td>
  </tr>
</table>
<!-- end of BLANK PANE -->


<!--
*****************************************************************************************
                       Queued Matching            Queued Matching
*****************************************************************************************
-->
<a name="tracewin_queue">&nbsp;</a>
<table border="0" width="100%" cellpadding=0 cellspacing=0>
  <tr>
  <td valign="top" align="right">
  <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
    <tr>
    <td class="title" width="100%" valign=middle align=center>
    Q<br/>
    u<br/>
    e<br/>
    u<br/>
    e<br/>
    d<br/>
    &nbsp;<br/>
    M<br/>
    a<br/>
    t<br/>
    c<br/>
    h<br/>
    i<br/>
    n<br/>
    g<br/>
    </td>
    </tr>
  </table>
  </td>
  <td width="100%" bgcolor="#000000">
  <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
    <tr>
    <td valign="top">
    <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
      <tr>
      <td width="100%" valign=top align=left>

<!-- Title and link to top go here -->
<table width="100%">
  <tr>
    <td><h2>Creating a queue or list of images to match against the database</h2></td>
    <td align="right"><a href="#toc">top</a></td>
  </tr>
</table>

<!-- body of pane goes here -->
<P>
Click on the "Open Image" button or use the "File/Open Image" menu option
in the main window to 
locate and open a dorsal fin image and complete the tracing process within the trace window
as previously described.  Then click the "Save" button in the trace
window and specify the desired filename for the saved fin. The filename must end in <B><I>".finz"</I></B>
and should be located in the <B><I>tracedFins</I></B> folder for the survey area currently being used.
This will save copies of the fin images (modified and original), 
the fin outline and feature points, and all sighting data into the specified file. 

<A name="matchqueuewin"></A>
<p><strong><img style="width: 255px; height: 255px; float: right;" alt="" src="usersguide.htg/matchqueue_thmb.jpg"></strong>
</p>

<P>
Once a number of such <B><I>fin</I></B> files have been
created, a matching queue can be created. To initiate this process,
click on the "Queue" button or use the "File/Matching Queue" menu option
in the main window to open the <B><I>Matching Queue Dialog</I></B> shown to the right. </p>

<p>Click the "Add..." button, select a fin filename (or filenames) from the 
displayed list,
then click "OK". The filenames should
appear in the list on the left side of matching queue window and 
the image of the last selected fin should be displayed in the
upper right of the window. After the names of all
desired fin files
have been added to the matching queue, the list of files may be saved
or may be immediately matched against
the database by clicking on either the "Save Queue" or "Run Match" button. A
previously created and saved list of
files may me loaded by clicking the "Load Queue" button, and then matched
against the database by
clicking the "Run Match" button. Progress bars indicate the extent to
which this batch matching process is complete.
<P>
The results of each match will be
written to a results file with a name of the form "xxx-DB-match-for-yyy.res" in the 
<B><I>matchQResults</I></B> folder within the current
survey area.  In this filename "xxx" is the root name of the database file ("xxx.db")
for the catalog against which the matches were made, and "yyy" is the root name of the 
fin file ("yyy.finz") which was the unknown <I>fin</I> being matched.
<P>
By pressing the "View Results" button in the matching queue window,
these saved results files may be reloaded at any time in
order to view the match results within the match results window.
<!-- end of body of pane -->

      </td>
    </tr>
    </table>
    </td>
    </tr>
  </table>
  </td>
  </tr>
</table>
<!-- end of BLANK PANE -->




                  <br/><a name="matchreswin">&nbsp;</a><br/>
         <table border="0" width="100%" cellpadding=0 cellspacing=0>
            <tr>
              <td valign="top" align="right">
                <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
                  <tr>
                    <td class="title" width="100%" valign=middle align=center>
                    M<br/>
                    a<br/>
                    t<br/>
                    c<br/>
                    h<br/>
                    &nbsp;<br/>
                    R<br/>
                    e<br/>
                    s<br/>
                    u<br/>
                    l<br/>
                    t<br/>
                    s<br/>
                    &nbsp;<br/>
                    W<br/>
                    i<br/>
                    n<br/>
                    d<br/>
                    o<br/>
                    w<br/>
                    </td>
                  </tr>
                </table>
              </td>
              <td width="100%" bgcolor="#000000">
                <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
                  <tr>
                    <td valign="top">
                      <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
                        <tr>
                          <td width="100%" valign=top align=left>

<table width="100%">

  <tbody>

    <tr>

      <td><h2>The
Match Results Window</h2></td>

      <td align="right"><a href="#toc">top</a></td>

    </tr>

  </tbody>
</table>

</p>

<p><img style="width: 515px; height: 317px; float: right;" alt="" src="usersguide.htg/matchres_thmb.jpg">

</p>

<p>When the Match results window appears, the image of the fin from the catalog which matches most closely will
be displayed on the left and the image of the unknown fin will be displayed on the right.  The outlines of the 
two dorsal fins, as aligned by the software, will be displayed below the unknown fin.  The outline of the
fin from the catalog is displayed in blue, the outline of the unknown fin is displayed in red.

Below the image of the fin from the catalog, a list of all of the images in the catalog, rank ordered
by their similarity to the unknown fin is 
displayed. The user may view the each catalog image side by side with the unknown image to facilitate
comparison by using the next and previous buttons or by clicking on an entry from the list.

<br><br>
The buttons below each image affect the display of the image. By default the images are displayed
with any modifications (such as contrast enhancement, cropping, etc.) that were made after loading the 
image into DARWIN.
<br><br>
SHOW ORIGINAL IMAGE - displays the original, uncropped, unmodified image.
<br><br>
SHOW MODIFIED IMAGE - displays the modified, enhanced image.
<br><br>
MATCH SELECTED FIN ORIENTATION - this button is currently not enabled.

<br><br>
The buttons above the match results list allow the list to be sorted according 
to that particular
data column.  For example, the damage button displays the catalog sorted by damage category.
Within a single damage category, the images will be sorted according to their similarity to
the unknown fin.

<br><br>
The buttons to the left of the outlines modify the display of the match results list.
<br><br>
INFO - enables and disables the display of information in the rank ordered list of matches.
<br><br>
HIDE ID's - replaces the ID's of the individuals in the catalog with asterisks to enable blind matching.
<br><br>
PREVIOUS - displays the image and outline of the previous individual in the rank ordered list of results.
<br><br>
NEXT - displays the image and outline of the next individual in the rank ordered list of results.
<br><br>
SCROLL(on/off) - steps through the database matches one at a time without user interaction
to facilitate review of results.  This button works as a toggle starting and stopping
the scrolling feature.
</p>

The buttons to the right of the outlines interact with the catalog or the matching session
as follows:

<p>UPDATE SELECTED FIN - button currently does the same thing as the ADD NEW button below.</p>

<p>ADD NEW FIN TO CATALOG - button pops up a window which allows the fin and its
sighting data to be added to the database.
</p>

<p>RETURN TO MATCHING DIALOG - returns to the matching window so that
additional damage categories or an alternative matching method may be 
selected for searching using the same fin and traced outline.</p>

<p>SAVE MATCH RESULTS - saves the results of the match for later viewing.  Any
"results" file can be
reloaded from the match queue window, accessed from the "Queue" button on the
main window.</p>

<p>DONE - Close the match results window.


</p>

                                  </td>
                                </tr>
                              </table>
                            </td>
                          </tr>
                        </table>
                      </td>
                    </tr>
                  </table>
                  <br/><a name="options">&nbsp;</a><br/>
         <table border="0" width="100%" cellpadding=0 cellspacing=0>
            <tr>
              <td valign="top" align="right">
                <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
                  <tr>
                    <td class="title" width="100%" valign=middle align=center>
                    O<br/>
                    p<br/>
                    t<br/>
                    i<br/>
                    o<br/>
                    n<br/>
                    s<br/>
                    &nbsp;<br/>
                    D<br/>
                    i<br/>
                    a<br/>
                    l<br/>
                    o<br/>
                    g<br/>
                    </td>
                  </tr>
                </table>
              </td>
              <td width="100%" bgcolor="#000000">
                <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
                  <tr>
                    <td valign="top">
                      <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
                        <tr>
                          <td width="100%" valign=top align=left>


<!----Options dialog----------------------------------------------------------------------------------->
<table width="100%">

  <tbody>
    <tr>
      <a name="options_general"> <td><h2>The Options Dialog</h2></td></a>
      <td align="right"><a href="#toc">top</a></td>
    </tr>
  </tbody>
</table>


<p>A number of settings that affect the program's appearance and
functionality may be modified
using the Options Dialog which appears when the "Settings/Options" 
menu option in the main window is clicked. 
<P>
The <b>"Matching"</b> tab is currently unused.
<BR><BR>

<table border="0" cellpadding="5" cellspacing="0">
  <tr>
      <td align="left" valign="top"><img style="width: 170px; height: 176px; float: left;" alt="" src="usersguide.htg/options_general.jpg"></td>
	  <td>
The <b>"General"</b> tab allows the user to select the style of the
buttons in the main window as text only, pictures only or both. Click
on the desired setting then click OK.
      </td>
    </tr>
    <tr>
      <td>&nbsp; </td>
    </tr>

<tr>
<td align="left" valign="top"><img style="width: 170px; height: 176px; float: left;" alt="" src="usersguide.htg/options_processing.jpg"></td>
<td>
The <b>"Image Processing"</b> tab enables access to settings which affect the edge image
which is used to reposition the outline of the dorsal fin along its
true edge. It is recommended that these parameters not be changed by the
user.
      </td>
    </tr>
    <tr>
      <td>&nbsp; </td>
    </tr>


<tr>
<td align="left" valign="top"><img style="width: 170px; height: 176px; float: left;" alt="" src="usersguide.htg/options_trace.jpg"></td>

      <td align="left" valign="center"><strong>Trace Settings: <a name="options_trace"> &nbsp;</a></strong>
The user may select the color in which the outline of
the dorsal fin will be displayed when it is overlaid on the image.
Clicking
on the choose button opens a color wheel within which you may select the desired color.
      <p>Additionally the user may change the settings which
affect how the
active contours operate to identify the true edge of the dorsal fin.
These settings are currently not intuitive to anyone who is not writing
the software, and they should not be changed.</p>
      </td>
    </tr>
    <tr>
      <td>&nbsp; </td>
    </tr>
    <tr>
      <td align="left" valign="top"><img style="width: 170px; height: 176px; float: left;" alt="" src="usersguide.htg/options_fonts.jpg"></td>

      <td align="left" valign="center"><strong>Font Settings:<a name="options_fonts">&nbsp;</a></strong>
These settings affect the font which is used in the main window and the 
match results window to display the lists of catalog entries.
Clicking on the "Change Font.." button opens a standard dialog that enables selection of a
font style and size.  This can be helpful in distinguishing similar characters from one another
(such as 0 and O, or 1 and l).</td>

    </tr>

</table>

</p>
                                  </td>
                                </tr>
                              </table>
                            </td>
                          </tr>
                        </table>
                      </td>
                    </tr>
                  </table>

<!--
*****************************************************************************************
                     Hints     Hints      Hints
*****************************************************************************************
-->
<a name="hints">&nbsp;</a>
<table border="0" width="100%" cellpadding=0 cellspacing=0>
  <tr>
  <td valign="top" align="right">
  <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
    <tr>
    <td class="title" width="100%" valign=middle align=center>
    H<br/>
    i<br/>
    n<br/>
    t<br/>
    s<br/>
    </td>
    </tr>
  </table>
  </td>
  <td width="100%" bgcolor="#000000">
  <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
    <tr>
    <td valign="top">
    <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
      <tr>
      <td width="100%" valign=top align=left>

<!-- Title and link to top go here -->
<table width="100%">
  <tr>
    <td><h2>Hints for Effective Usage</h2></td>
    <td align="right"><a href="#toc">top</a></td>
  </tr>
</table>

<!-- body of pane goes here -->
  <a name="hint_bad_outline"><B>Do this to help DARWIN produce better outlines?</B></a>
<OL>
	<LI>Always flip the image so that the dolphin faces (swims) to the left.  Right swimming
	fins are <I>not supported</I> by DARWIN at this time.

	<LI>Crop the image so that the fin height is at least 50% of the height of the image.

	<LI>Crop the image so that there is no significant glare in the foreground or on the 
	back of the dolphin below the fin.  Glare here is especially problematic when skin
	tone or water color is dark with bright highlights.  The autotrace feature will
	often find a boundary between the fin and the back, rather than along the profile edge
	of the fin, when foreground glare is significant.

	<LI>Always trace the fin from leading edge to trailing edge.  That is, click first on
	the leading edge beginning point and last on the trailing edge ending point.
	The software assumes this order, and does not attempt to correct the direction of
	trace.  Matching and fin identification are degraded by improper trace direction.

	<LI>Try to have similar lengths of leading and trailing edges traced.  Matching
	of new fin outlines against the catalog is improved when outlines have 
	leading and trailing edges of similar length.  Obviously, do not trim so much
	that you remove important damage characteristics from the trace.
</OL>
<!-- end of body of pane -->

      </td>
    </tr>
    </table>
    </td>
    </tr>
  </table>
  </td>
  </tr>
</table>
<!-- end of BLANK PANE -->

<!--
*****************************************************************************************
                        Details        Details         Details
*****************************************************************************************
-->
<a name="details">&nbsp;</a>
<table border="0" width="100%" cellpadding=0 cellspacing=0>
  <tr>
  <td valign="top" align="right">
  <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
    <tr>
    <td class="title" width="100%" valign=middle align=center>
    D<br/>
    e<br/>
    t<br/>
    a<br/>
    i<br/>
    l<br/>
    s<br/>
    </td>
    </tr>
  </table>
  </td>
  <td width="100%" bgcolor="#000000">
  <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
    <tr>
    <td valign="top">
    <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
      <tr>
      <td width="100%" valign=top align=left>

<!-- Title and link to top go here -->
<table width="100%">
  <tr>
    <td><h2>Behind the Scenes DETAILS</h2></td>
    <td align="right"><a href="#toc">top</a></td>
  </tr>
</table>

<!-- body of pane goes here -->
  <a name="details_finz"><B>The FINZ archive format</B></a>
  <P>
  Whenever a <I>fin</I> is saved from the trace window, or is exported from the catalog
  it is saved in a compressed <B>FINZ</B> archive file.  This archive contains a simple, single fin
  database file containing all fin data, traced fin outline and feature points, and copies
  of both modified and original fin images.  This archive can be opened directly for viewing by
  double-clicking on the file from the windows explorer, or it may be opened from the main
  window to be viewed, matched against the catalog or imported into the catalog.  Also, 
  FINZ files may be added to any match queue that is created for unattended, batched
  identity searches.  Older versions of DARWIN saved fins using a single FIN file and 
  separate image files, always assumed to be located in the same disk location.  DARWIN-2.0
  can use these FIN files but cannot save fins in this older format.
  </p>
  <a name="details_sql"><B>The SQL Catalog format</B></a>
  <P>
  All catalogs are organized using an SQL database format.  All data, traced fin outlines, 
  feature points and image filenames are stored in the database file (*.db) in the catalog folder,
  and copies of all images are saved in the same catalog folder.  Whenever a catalog fin is 
  selected within DARWIN, the database file is accessed to obtain all fin information for display.
  Images are loaded as needed for display.  Previous versions of DARWIN used a proprietary
  database file format.  Any database created using a previous version of DARWIN can be converted
  into the new SQL format by exporting it from your older DARWIN installation,
  and importing it into DARWIN-2.0, or by simply opening the old database using DARWIN-2.0.  
  NOTE: If your old catalog (database) was created using DARWIN 1.8 or earlier there are
  additional conversion issues discussed in the FAQS below.
  </P>
  <a name="details_config"><B>The "darwin.cfg" file</B></a>
<P>
DARWIN uses a configuration file to keep track of numerous user definable and
selectable settings. All of the Option selections described in the previous section
are saved in this configuration file. The name and location of the last used
survey area and catalog (database) are also saved as part of the configuration.
The default catalog category naming scheme and any schemes defined by the user
are also saved here.  The configuration file is a plain text file.  It is named 
<I>"darwin.cfg"</I> and is located in the <I>system</I> folder.  
</P>
<P>
When DARWIN is initially installed there is no configuration file and no defined
catalog.  DARWIN builds the initial configuration from default values.  You must
create the initial (empty) catalog from the main window. When you exit
DARWIN, all of the current settings, defined schemes, catalog name,
etc, are saved in the configuration file.  When you run DARWIN again it loads the
configuration file, resuming the last active session.  
</P>
  <a name="details_auto_backups"><B>DARWIN's automatic backups "darwin.cfg.bak" and "lastLoadOf....db</B>"</a>
<P>
Whenever DARWIN is run it makes immediate backups of the configuration (<I>"darwin.cfg.bak"</I>) 
and the SQL database file for the catalog being opened ("lastLoadOf_xxx_yyy.db" where "xxx" is the
survey area name and "yyy" is the catalog name). Both of these files are located in the <I>system</I>
folder.
<P>
If during startup DARWIN does not find 
the normal configuration file, it attempts to load the backup configuration.  If
neither configuration file can be found, then DARWIN creates a new configuration
from its default values.  If a loss of configuration ever occurs, you will have
to manually rebuild any catalog category schemes.  However, access to all of your catalogs
themselves is simply reestablished by opening each catalog as needed.
<P>
If there is an error opening the catalog or if the catalog is corrupted during use
it may be possible to recover the catalog by manually copying the "lastLoadOf_xxx_yyy.db" 
file to the location "surveyAreas\xxx\catalog\yyy.db" and then restarting DARWIN. CAUTION:
This should be done immediately after realizing that the catalog is corrupted.  Repeated
attempts to restart DARWIN can result in corruption of the "lastLoadOf....db" file as well as 
of the catalog itself.
</P>
  <a name="details_schemes"><B>DEFINED and CURRENT Catalog Category Schemes</B></a>
<P>
The user may create catalog category naming schemes in order to organize catalog
in data into meaningful categories.  These categories can be used to restrict or focus 
searches of the catalog, speeding catalog access and identification queries.  Each
scheme has a scheme name and a list of alphanumeric category names.  The default scheme
is based on the Eckerd College Dolphin Survey scheme.  All schemes are saved as
part of DARWIN's configuration.  Any scheme may be selected as the current default
and may be used in the creation of a new catalog.  NOTE: Once a catalog has been
created (even if empty) its category naming scheme is fixed and is actually saved
within the database file itself.  The scheme for an existing catalog cannot be modified
in the current version of DARWIN.
</P>
<!-- end of body of pane -->

      </td>
    </tr>
    </table>
    </td>
    </tr>
  </table>
  </td>
  </tr>
</table>
<!-- end of BLANK PANE -->

<!--
*****************************************************************************************
                       FAQs     FAQs     FAQs     FAQs     FAQs
*****************************************************************************************
-->
<a name="faq">&nbsp;</a>
<table border="0" width="100%" cellpadding=0 cellspacing=0>
  <tr>
  <td valign="top" align="right">
  <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
    <tr>
    <td class="title" width="100%" valign=middle align=center>
    F<br/>
    a<br/>
    q<br/>
    s<br/>
    </td>
    </tr>
  </table>
  </td>
  <td width="100%" bgcolor="#000000">
  <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
    <tr>
    <td valign="top">
    <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
      <tr>
      <td width="100%" valign=top align=left>

<!-- Title and link to top go here -->
<table width="100%">
  <tr>
    <td><h2>Frequently Asked Questions</h2></td>
    <td align="right"><a href="#toc">top</a></td>
  </tr>
</table>

<!-- body of pane goes here -->
<ol>
  <li><a name="what_is_finz"><B>What is the new FINZ archive format?</B></a>
  See description in previous section.
  <li><a name="how_convert_catalog"><B>How can I move a catalog from an old installation to a new one?</B></a>
  See options in the installation/upgrade section.
  <li><a name="how_recover_catalog"><B>How can I recover from a corrupted catalog?</B></a>
  See procedure in previous section.
  <li><a name="how_report_error"><B>How do I report a problem with DARWIN?</B></a>
  Email us at <B><I>darwin@eckerd.edu</I></B>
  <li><a name="whats_in_config"><B>What is in the DARWIN configuration file?</B></a>
  See details in section above.  Also, you can open the "system\darwin.cfg" file in any text editor
  such as notepad.  It is quite readable.  However, DO NOT modify this file unless you like living
  on the edge.  DARWIN may or may not load correctly after you change its configuration file manually.
  <li><a name="whats_auto_saved"><B>What does DARWIN automatically save (in case)?</B></a>
  See details in section above.
  <li><a name="area_or_catalog"><B>Should I create a new Catalog within the current Survey Area or a new Survey Area AND Catalog for a separate study?</B></a>
  The support for multiple catalogs within the same survey area was intended to allow
  flexible creation and use of catalog subsets in various ways.  There is no <I>best</I>
  way to do this.  If you want to provide the cleanest separation between your various
  catalogs, then have only one catalog per survey area.
  <li><a name="mod_image_thumb_only"><B>Why does DARWIN save images modified within the TraceWindow
  as thumbnails only ... and how do I recover full-size versions for use outside of DARWIN?</B></a>
  All images modified within DARWIN's TraceWindow are saved to disk as PNG images whenever the
  fin is added to a catalog or is saved as a separate FINZ file.  Since version 1.85, in 
  order to reduce memory usage, each such <I>modified</I> image has been saved as a thumbnail 
  only.  However, this thumbnail file contains the name of the original image from which the 
  modified image was created and a list of the sequence of image modifications performed by 
  the user.  Whenever DARWIN loads a fin from the catalog or from a separate FINZ file the modified
  image is loaded, and if it is a thumbnail then DARWIN locates the original image and applies 
  all indicated modifications in order to build a full-size modified image for any subsequent use.
  Therefore, DARWIN <B><I>always</I></B> uses full-size images.  If the user manually locates
  a modified image (something like "ecdp_papi_123_wDarwinMods.png") using any program other
  than DARWIN, only the thumbnail will be available.  Beginning with version 2.02, DARWIN
  now supports export of full-size modified images of any fins stored in the catalog.  From
  the MainWindow select "Export Images (Full Size)" from the File/Export menu.  This initiates
  a process allowing selection of one or more fins in the database for which full-size images
  are desired and selection / creation of a folder in which to save them.  Each image will
  be automatically named by adding a suffix of "_fullSize" to the thumbnail file's root name
  (so "ecdp_papi_123_wDarwinMods.png" becomes "ecdp_papi_123_wDarwinMods_fullSize.png").
  Note that the export does not change any of the images that are actually part of the
  catalog itself.  The export process creates a NEW collection of full-size modified image, which
  you may now use with any other program capable of viewing or manipulating images.
</ol>
<!-- end of body of pane -->

      </td>
    </tr>
    </table>
    </td>
    </tr>
  </table>
  </td>
  </tr>
</table>
<!-- end of BLANK PANE -->

<!--
*****************************************************************************************
                    Troubleshooting
*****************************************************************************************
-->
<a name="trouble">&nbsp;</a>
<table border="0" width="100%" cellpadding=0 cellspacing=0>
  <tr>
  <td valign="top" align="right">
  <table border=0 cellspacing=0 bgcolor="#000000" cellpadding=4>
    <tr>
    <td class="title" width="100%" valign=middle align=center>
    T<br/>
    r<br/>
    o<br/>
    u<br/>
    b<br/>
    l<br/>
    e<br/>
    s<br/>
    h<br/>
    o<br/>
    o<br/>
    t<br/>
    i<br/>
    n<br/>
    g<br/>
    </td>
    </tr>
  </table>
  </td>
  <td width="100%" bgcolor="#000000">
  <table border=0 width="100%" bgcolor="#000000" cellpadding=2 cellspacing=0>
    <tr>
    <td valign="top">
    <table border=0 width="100%" bgcolor="#E6E6E6" cellpadding=8 cellspacing=0>
      <tr>
      <td width="100%" valign=top align=left>

<!-- Title and link to top go here -->
<table width="100%">
  <tr>
    <td><h2>Troubleshooting (<I>details to come as problems are reported</I>)</h2></td>
    <td align="right"><a href="#toc">top</a></td>
  </tr>
</table>

<!-- body of pane goes here -->
<B>Problems with Install/Upgrade</B><BR><BR>
<B>Problems with Catalog Conversion</B><BR><BR>
<B>Problems with Tracing Fins</B><BR><BR>
<B>Problems with Catalog Schemes</B><BR><BR>
<B>Problems with Catalog Data / Images</B><BR><BR>
<!-- end of body of pane -->

      </td>
    </tr>
    </table>
    </td>
    </tr>
  </table>
  </td>
  </tr>
</table>
<!-- end of BLANK PANE -->


  <br/><br/>
  <p class="cright" align=center>
        &copy; 2008 DARWIN Research Group
    </p>

</body>
</html>
